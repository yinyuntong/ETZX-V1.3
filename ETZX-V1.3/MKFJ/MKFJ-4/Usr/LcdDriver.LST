C51 COMPILER V9.00   LCDDRIVER                                                             06/23/2017 13:33:25 PAGE 1   


C51 COMPILER V9.00, COMPILATION OF MODULE LCDDRIVER
OBJECT MODULE PLACED IN LcdDriver.OBJ
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE LcdDriver.c OPTIMIZE(SIZE) BROWSE DEBUG OBJECTEXTEND

line level    source

   1          /*
   2          ************************Copyright(c)************************
   3          *                                  湖南熙旺达科技有限公司
   4          *                               All Rights Reserved
   5          *                                        
   6          *
   7          *-----------------------文件信息---------------------------
   8          *文件名称               :LcdDriver.c
   9          *文件描述               :液晶驱动程序
  10          *创建人                 :熊坚强
  11          *创建日期               :2008-9-22
  12          *版本号                 :V1.1
  13          *注释                   :
  14          *----------------------------------------------------------
  15          *修改人                         :
  16          *修改日期                       :
  17          *版本号                 :
  18          *注释                   :
  19          ***********************************************************
  20          */
  21          #define _IN_LCD_
  22          #include "config.h"
  23          sbit    SSD1963_CS     = P1^0;
  24          sbit    SSD1963_RST    = P1^1;
  25          sbit    SSD1963_CD     = P5^3;
  26          sbit    SSD1963_TE     = P4^2;
  27          sbit    SSD1963_WR     = P3^6;
  28          sbit    SSD1963_RD     = P3^7;
  29          #define SSD1963_DATAL   P0
  30          #define SSD1963_DATAH   P2
  31          uint16 xdata fontbuf;
  32          extern bit   Page_Flag;
  33          extern uint8 xdata  SerchRoom;
  34          extern uint8 xdata  GT23_Rec_Data[128];
  35          extern uint8 xdata  Page_Color[5];
  36          extern uint8 xdata  Modify_Room_Number;
  37          extern uint8 xdata  Modify_SEC_Name;
  38          extern STLocalControl   xdata stLocalControl;
  39          bit    Broadcasting_Flag;
  40          bit    First_Serchroom_Flag;
  41          extern bit  BusLowRenewOK_Flag;
  42          extern void Delayms(uint16 ms);
  43          
  44          extern bit bLcdOn;
  45          
  46          
  47          
  48          const uint8 byAsciiTable[] = 
  49          {
  50            0x00,0x30,0x00,0x31,0x00,0x32,0x00,0x33,0x00,0x34,0x00,0x35,0x00,0x36,0x00,0x37,0x00,0x38,0x00,0x39
  51          };
  52          const uint8 byWordTable[] = 
  53          {
  54            0xB7,0xBF,0xB4,0xB2,0xBA,0xF4,0xBD,0xD0,0xCE,0xC0,0xC9,0xFA,0xBC,0xE4,0xCA,0xE4,0xD2,0xBA,0xCD,0xEA,0xB1
             -,0xCF,0xBC,0xD3
C51 COMPILER V9.00   LCDDRIVER                                                             06/23/2017 13:33:25 PAGE 2   

  55          }; 
  56          const uint8  byLandingWord[] = 
  57          {
  58            0xCF,0xB5,0xCD,0xB3,0xB3,0xF5,0xCA,0xBC,0xBB,0xAF
  59          };
  60          
  61          const uint16 ColorIndex[9]={0x0000,0xF800,0x07E0,0x0007,0x001F,0xFFE0,0xF81F,0x07FF,0xFFFF};
  62          
  63          /*#define        BLACK   0x0000    //0
  64          #define  RED     0xF800    //1
  65          #define  GREEN   0x07E0    //2
  66          #define  BLUE1   0x0007    //3
  67          #define  BLUE    0x001F    //4
  68          #define  YELLOW  0xFFE0    //5
  69          #define  PURPLE  0xF81F    //6
  70          #define  CYAN    0x07FF    //7
  71          #define  WHITE   0xFFFF    //8*/
  72          
  73          
  74          void Send_Ssd1963_Command(uint8 ssd1963_command)
  75          {
  76   1         SSD1963_CD=0; 
  77   1         //SSD1963_CS=0;
  78   1         SSD1963_WR=0;
  79   1         SSD1963_DATAH=0x00;
  80   1         SSD1963_DATAL=ssd1963_command;
  81   1         //SSD1963_CS=1;
  82   1         SSD1963_WR=1;
  83   1         SSD1963_CD=1;
  84   1      }
  85          void Send_Ssd1963_Data(uint16 ssd1963_data)
  86          {
  87   1         //SSD1963_CD=1; 
  88   1         //SSD1963_CS=0;
  89   1         SSD1963_WR=0;
  90   1         SSD1963_DATAH=ssd1963_data/256;
  91   1         SSD1963_DATAL=ssd1963_data%256;
  92   1         //SSD1963_CS=1;
  93   1         SSD1963_WR=1;
  94   1         //SSD1963_CD=0;
  95   1      }
  96          void Set_Display_Area(uint16 start_x,uint16 end_x,uint16 start_y,uint16 end_y)
  97          {
  98   1        uint8 xdata shigh_x1,slow_x1,shigh_x2,slow_x2;
  99   1        uint8 xdata shigh_y1,slow_y1,shigh_y2,slow_y2;
 100   1        shigh_x1=start_x>>8;
 101   1        slow_x1=start_x&0xff;
 102   1        shigh_x2=end_x/256;
 103   1        slow_x2=end_x%256;
 104   1        shigh_y1=start_y/256;
 105   1        slow_y1=start_y%256;
 106   1        shigh_y2=end_y/256;
 107   1        slow_y2=end_y%256;
 108   1        Send_Ssd1963_Command(0x2A);
 109   1        Send_Ssd1963_Data(shigh_x1);
 110   1        Send_Ssd1963_Data(slow_x1);
 111   1        Send_Ssd1963_Data(shigh_x2);
 112   1        Send_Ssd1963_Data(slow_x2);
 113   1        Send_Ssd1963_Command(0x2B);
 114   1        Send_Ssd1963_Data(shigh_y1);
 115   1        Send_Ssd1963_Data(slow_y1);
 116   1        Send_Ssd1963_Data(shigh_y2);
C51 COMPILER V9.00   LCDDRIVER                                                             06/23/2017 13:33:25 PAGE 3   

 117   1        Send_Ssd1963_Data(slow_y2);
 118   1      }
 119          void SetScrollArea(uint16 top, uint16 scroll, uint16 bottom)
 120          {
 121   1        Send_Ssd1963_Command(0x33);
 122   1        Send_Ssd1963_Data(top>>8);
 123   1        Send_Ssd1963_Data(top);
 124   1        Send_Ssd1963_Data(scroll>>8);
 125   1        Send_Ssd1963_Data(scroll);
 126   1        Send_Ssd1963_Data(bottom>>8);
 127   1        Send_Ssd1963_Data(bottom);
 128   1      }
 129          void SetScrollStart(uint16 line)
 130          {
 131   1        Send_Ssd1963_Command(0x37);
 132   1        Send_Ssd1963_Data(line>>8);
 133   1        Send_Ssd1963_Data(line); 
 134   1      }
 135          void Set_VisualPage(uint8 VisualPage)
 136          {
 137   1        SetScrollStart(VisualPage*272);
 138   1      }
 139          void Lcd_Fill(uint16 start_x,uint16 start_y, uint16 width, uint16 height,uint16 color)
 140          {
 141   1        uint16 xdata  i,j;
 142   1        Set_Display_Area(start_x,start_x+width-1,start_y,start_y+height-1);
 143   1        Send_Ssd1963_Command(0x2C);
 144   1        SSD1963_DATAH=color/256;
 145   1        SSD1963_DATAL=color%256;
 146   1         for(i=0;i<height;i++)
 147   1          {
 148   2           for(j=0;j<width;j++)
 149   2           {
 150   3            //Send_Ssd1963_Data(color);
 151   3                      SSD1963_WR=0;
 152   3                      SSD1963_WR=1;
 153   3               }
 154   2         }
 155   1      }
 156          void Lcd_Clear(uint16 color,uint8 VisualPage)
 157          {
 158   1        uint16 xdata k,j;
 159   1        Set_Display_Area(0x00,0x1DF,VisualPage*272,0x10F+VisualPage*272);
 160   1        Send_Ssd1963_Command(0x2C);
 161   1        SSD1963_DATAH=color/256;
 162   1        SSD1963_DATAL=color%256;
 163   1        for(k=0;k<480;k++)
 164   1          {
 165   2                for(j=0;j<272;j++)
 166   2                {
 167   3                      SSD1963_WR=0;
 168   3                      SSD1963_WR=1;
 169   3                }
 170   2            //Send_Ssd1963_Data(color);
 171   2          }
 172   1        WDT_CONTR = 0x3d;
 173   1      }
 174          void lcd_fangda_dis_text(uint16 x,uint16 y, uint8 type_x_wide, uint8 type_y_height,uint8 mul_col,uint8 mul
             -_row,uint16 fcolor,uint16 bcolor,uint8 *p)
 175          {
 176   1          uint8 xdata i,j,k,m,n;
 177   1              Set_Display_Area(x,x+type_x_wide*mul_col-1,y,y+type_y_height*mul_row-1);
C51 COMPILER V9.00   LCDDRIVER                                                             06/23/2017 13:33:25 PAGE 4   

 178   1      
 179   1              
 180   1              Send_Ssd1963_Command(0x2C);
 181   1              for (i=0;i<type_y_height;i++) 
 182   1              {
 183   2                for(n=0;n<mul_row;n++)        
 184   2                      {
 185   3              for(j=0;j<type_x_wide/8;j++)    
 186   3                       {
 187   4                       for(k=0;k<8;k++)       
 188   4                        {
 189   5                              for(m=0;m<mul_col;m++)  
 190   5                              {
 191   6                                if ((p[i*(type_x_wide/8)+j]>>(7-k))&0x1)
 192   6                                 {
 193   7                                        fontbuf=fcolor;                                               
 194   7                                      }
 195   6      
 196   6                               else
 197   6                                {
 198   7                                       fontbuf=bcolor;                                                                
 199   7                                }
 200   6                                Send_Ssd1963_Data(fontbuf);
 201   6                              }
 202   5                      }
 203   4                 }
 204   3              }
 205   2        }
 206   1        WDT_CONTR =0x3d;
 207   1      }
 208          void ShowWord(uint16 xdata byRow, uint16 xdata byCol, uint8 xdata byWord,uint16 xdata fcolor,uint16 xdata 
             -bcolor,uint8 xdata size)
 209          {
 210   1              uint8 xdata uiHPosition,uiLPosition;
 211   1              uiHPosition = byWordTable[byWord * 2];
 212   1              uiLPosition     = byWordTable[byWord *2 +1];
 213   1              Get_GT23_Data(uiHPosition,uiLPosition,3);
 214   1              lcd_fangda_dis_text(byRow,byCol,32,32,size,size,fcolor,bcolor,GT23_Rec_Data);
 215   1      }
 216          void ShowAscii(uint16 xdata byRow, uint16 xdata byCol, uint8 xdata byAscii,uint16 xdata fcolor,uint16 xdat
             -a bcolor,uint8 xdata size)
 217          {
 218   1              uint8 xdata uiHPosition,uiLPosition;
 219   1              uiHPosition = byAsciiTable[byAscii * 2];
 220   1              uiLPosition     = byAsciiTable[byAscii *2 +1];
 221   1              Get_GT23_Data(uiHPosition,uiLPosition,3);       
 222   1              lcd_fangda_dis_text(byRow,byCol,16,32,size,size,fcolor,bcolor,GT23_Rec_Data);   
 223   1      } 
 224          /**********************************************************
 225          *函数名称                       :ShowCallFace   
 226          *函数描述               :显示呼叫界面
 227          *输入参数               :byRoomAddr:房地址,byBedAddr:床地址,byCmd:呼叫命令                                       
 228          *返回值                         :       
 229          *全局变量                       :
 230          *调用模块                       :
 231          ***********************************************************
 232          *创建人                 :熊坚强
 233          *创建日期                       :2008-9-22
 234          ***********************************************************
 235          *修改人                         :
 236          *修改日期               :
 237          *注释                   : 呼叫信息放在第3屏显示
C51 COMPILER V9.00   LCDDRIVER                                                             06/23/2017 13:33:25 PAGE 5   

 238          **********************************************************/ 
 239          void ShowCallFace(uint8 byRoomAddr, uint8 byBedAddr, uint8 byCmd)
 240          {
 241   1          uint16 xdata fcolor,bcolor;
 242   1              fcolor=WHITE;//字体颜色
 243   1              bcolor=BLUE; //字体背景色,也是清屏色
 244   1              Lcd_Fill(0,644,480,80,bcolor);
 245   1              switch(byCmd)
 246   1              {
 247   2                      case CMD_INFUSION_CALL:                                                               //服务呼叫命令
 248   2                               byBedAddr &= 0x7F;
 249   2                               byBedAddr %= 100;
 250   2                          //---------------------------------------------------------------
 251   2                          //---------------------------------------------------------------
 252   2                          //加床分机呼叫
 253   2                              if(byRoomAddr==250)
 254   2                              {
 255   3                                 ShowWord(70,648,11,fcolor,bcolor,2);                             //加
 256   3                                 ShowAscii(144,653,byBedAddr/10,fcolor,bcolor,2);
 257   3                                 ShowAscii(176,653,byBedAddr%10,fcolor,bcolor,2);
 258   3                                 ShowWord(218,648,1,fcolor,bcolor,2);                            //床
 259   3                                 ShowWord(282,648,2,fcolor,bcolor,2);                            //呼
 260   3                                 ShowWord(346,648,3,fcolor,bcolor,2);                            //叫
 261   3                              }
 262   2                         //---------------------------------------------------------------
 263   2                         //---------------------------------------------------------------
 264   2                         //非加床分机呼叫
 265   2                              else
 266   2                              {
 267   3                                 byRoomAddr &= 0x7F;
 268   3                                 byRoomAddr %= 100;
 269   3                                 ShowAscii(23,653,byRoomAddr/10,fcolor,bcolor,2);
 270   3                                 ShowAscii(55,653,byRoomAddr%10,fcolor,bcolor,2);
 271   3                                 ShowWord(97,648,0,fcolor,bcolor,2);                             //房
 272   3                                 ShowAscii(171,653,byBedAddr/10,fcolor,bcolor,2);
 273   3                                 ShowAscii(203,653,byBedAddr%10,fcolor,bcolor,2);
 274   3                                 ShowWord(245,648,1,fcolor,bcolor,2);                            //床
 275   3                                 ShowWord(319,648,2,fcolor,bcolor,2);                            //呼
 276   3                                 ShowWord(393,648,3,fcolor,bcolor,2);                            //叫
 277   3                               }
 278   2                              break; 
 279   2                      case CMD_SERVICE_CALL:                                                                 //输液呼叫命令
 280   2                              byRoomAddr &= 0x7F;
 281   2                              byRoomAddr %= 100;
 282   2                              byBedAddr &= 0x7F;
 283   2                              byBedAddr %= 100;
 284   2                              ShowAscii(94,660,byRoomAddr/10,fcolor,bcolor,1);
 285   2                              ShowAscii(110,660,byRoomAddr%10,fcolor,bcolor,1);
 286   2                              ShowWord(131,656,0,fcolor,bcolor,1);                               //房
 287   2                              ShowAscii(168,660,byBedAddr/10,fcolor,bcolor,1);
 288   2                              ShowAscii(184,660,byBedAddr%10,fcolor,bcolor,1);
 289   2                              ShowWord(205,656,1,fcolor,bcolor,1);                               //床
 290   2                              ShowWord(242,656,7,fcolor,bcolor,1);                               //输
 291   2                              ShowWord(279,656,8,fcolor,bcolor,1);                               //液
 292   2                              ShowWord(316,656,9,fcolor,bcolor,1);                   //完
 293   2                              ShowWord(353,656,10,fcolor,bcolor,1);                      //毕
 294   2                              break; 
 295   2                      case CMD_EMERGENCY_CALL:                                                               //紧急呼叫命令
 296   2                              byRoomAddr &= 0x7F;
 297   2                              byRoomAddr %= 100;
 298   2                              byBedAddr &= 0x7F;
 299   2                              byBedAddr %= 100;
C51 COMPILER V9.00   LCDDRIVER                                                             06/23/2017 13:33:25 PAGE 6   

 300   2                              ShowAscii(16,653, byRoomAddr/10,fcolor,bcolor,2);
 301   2                              ShowAscii(48,653, byRoomAddr%10,fcolor,bcolor,2);
 302   2                              ShowWord(80,648,0,fcolor,bcolor,2);                                        //房
 303   2                              ShowWord(144,648,4,fcolor,bcolor,2);                               //卫
 304   2                              ShowWord(208,648,5,fcolor,bcolor,2);                       //生
 305   2                              ShowWord(272,648,6,fcolor,bcolor,2);                   //间
 306   2                              ShowWord(336,648,2,fcolor,bcolor,2);                   //呼
 307   2                              ShowWord(400,648,3,fcolor,bcolor,2);                   //叫
 308   2                              break;
 309   2              } 
 310   1              Set_VisualPage(2); 
 311   1      }
 312          /**********************************************************
 313          *函数名称                       :void ShowVersion(uint8 xdata hversion,uint8 xdata lversion,uint8 page)
 314          *函数描述               :显示软件版本号
 315          *输入参数               :hversion--软件版本高位,lversion--软件版本低位                                   
 316          *返回值                         :       
 317          *全局变量                       :
 318          *调用模块                       :
 319          ***********************************************************
 320          *创建人                 :熊坚强
 321          *创建日期                       :2008-9-22
 322          ***********************************************************
 323          *修改人                         :
 324          *修改日期               :
 325          *注释                   :软件版本号放在第1屏显示
 326          **********************************************************/ 
 327          void ShowVersion(uint8 xdata hversion,uint8 xdata lversion,uint8 page)
 328          {
 329   1          uint16 xdata fcolor,bcolor;
 330   1          fcolor=WHITE;             //字体颜色
 331   1          bcolor=BLUE;                  //字体背景色,也是清屏色         
 332   1              Get_GT23_Data(0xC8,0xED,3);
 333   1              if(page==0)
 334   1          lcd_fangda_dis_text(0,112,32,32,2,2,fcolor,bcolor,GT23_Rec_Data); //软
 335   1              else
 336   1              lcd_fangda_dis_text(0,112+272,32,32,2,2,fcolor,bcolor,GT23_Rec_Data); //软
 337   1      
 338   1              
 339   1          Get_GT23_Data(0xBC,0xFE,3);
 340   1              if(page==0)
 341   1          lcd_fangda_dis_text(64,112,32,32,2,2,fcolor,bcolor,GT23_Rec_Data); //件
 342   1              else
 343   1              lcd_fangda_dis_text(64,112+272,32,32,2,2,fcolor,bcolor,GT23_Rec_Data); //件
 344   1              
 345   1          Get_GT23_Data(0xB0,0xE6,3);
 346   1              if(page==0)
 347   1          lcd_fangda_dis_text(128,112,32,32,2,2,fcolor,bcolor,GT23_Rec_Data);//版
 348   1              else
 349   1              lcd_fangda_dis_text(128,112+272,32,32,2,2,fcolor,bcolor,GT23_Rec_Data);//版
 350   1      
 351   1              
 352   1          Get_GT23_Data(0xB1,0xBE,3);
 353   1              if(page==0)
 354   1          lcd_fangda_dis_text(192,112,32,32,2,2,fcolor,bcolor,GT23_Rec_Data);//本
 355   1              else
 356   1          lcd_fangda_dis_text(192,112+272,32,32,2,2,fcolor,bcolor,GT23_Rec_Data);//本
 357   1      
 358   1              
 359   1              Get_GT23_Data(0xBA,0xC5,3);
 360   1              if(page==0)
 361   1          lcd_fangda_dis_text(256,112,32,32,2,2,fcolor,bcolor,GT23_Rec_Data);//号
C51 COMPILER V9.00   LCDDRIVER                                                             06/23/2017 13:33:25 PAGE 7   

 362   1              else
 363   1              lcd_fangda_dis_text(256,112+272,32,32,2,2,fcolor,bcolor,GT23_Rec_Data);//号
 364   1      
 365   1              
 366   1              Get_GT23_Data(0x00,0x3A,3);
 367   1              if(page==0)
 368   1              lcd_fangda_dis_text(320,112,16,32,2,2,fcolor,bcolor,GT23_Rec_Data);//:
 369   1              else
 370   1              lcd_fangda_dis_text(320,112+272,16,32,2,2,fcolor,bcolor,GT23_Rec_Data);//:
 371   1              
 372   1              Get_GT23_Data(0x00,0x56,3);
 373   1              if(page==0)
 374   1              lcd_fangda_dis_text(352,116,16,32,2,2,fcolor,bcolor,GT23_Rec_Data);//V
 375   1              else
 376   1              lcd_fangda_dis_text(352,116+272,16,32,2,2,fcolor,bcolor,GT23_Rec_Data);//V
 377   1      
 378   1              
 379   1              Get_GT23_Data(0x00,0x30+hversion,3);
 380   1              if(page==0)
 381   1              lcd_fangda_dis_text(384,112,16,32,2,2,fcolor,bcolor,GT23_Rec_Data);//1
 382   1              else
 383   1              lcd_fangda_dis_text(384,112+272,16,32,2,2,fcolor,bcolor,GT23_Rec_Data);//1
 384   1      
 385   1              
 386   1              Get_GT23_Data(0x00,0x2E,3);
 387   1              if(page==0)
 388   1              lcd_fangda_dis_text(416,112,16,32,2,2,fcolor,bcolor,GT23_Rec_Data);//.
 389   1              else
 390   1              lcd_fangda_dis_text(416,112+272,16,32,2,2,fcolor,bcolor,GT23_Rec_Data);//.
 391   1              
 392   1              Get_GT23_Data(0x00,0x30+lversion,3);
 393   1              if(page==0)
 394   1              lcd_fangda_dis_text(448,112,16,32,2,2,fcolor,bcolor,GT23_Rec_Data);//1
 395   1              else
 396   1              lcd_fangda_dis_text(448,112+272,16,32,2,2,fcolor,bcolor,GT23_Rec_Data);//1
 397   1              if(page==0)
 398   1              Set_VisualPage(0);
 399   1              else
 400   1              Set_VisualPage(1);
 401   1      } 
 402          /**********************************************************
 403          *函数名称                       :ShowLandingWord        
 404          *函数描述               :显示登陆汉字字符
 405          *输入参数               :byRow:行地址,byCol:列地址,byWord:汉字                                   
 406          *返回值                         :       
 407          *全局变量                       :
 408          *调用模块                       :
 409          ***********************************************************
 410          *创建人                 :熊坚强
 411          *创建日期                       :2008-9-22
 412          ***********************************************************
 413          *修改人                         :
 414          *修改日期               :
 415          *注释                   :
 416          **********************************************************/ 
 417          void ShowLandingWord(uint16 xdata byRow, uint16 xdata byCol, uint8 xdata byWord,uint16 xdata fcolor,uint16
             - xdata bcolor)
 418          {
 419   1              uint8 xdata byHPosition,byLPosition;
 420   1              byHPosition = byLandingWord[byWord * 2];
 421   1              byLPosition     = byLandingWord[byWord *2 +1];
 422   1              Get_GT23_Data(byHPosition,byLPosition,3);
C51 COMPILER V9.00   LCDDRIVER                                                             06/23/2017 13:33:25 PAGE 8   

 423   1              lcd_fangda_dis_text(byRow,byCol,32,32,1,1,fcolor,bcolor,GT23_Rec_Data); 
 424   1      }
 425          /**********************************************************
 426          *函数名称                       :ShowLandingFace        
 427          *函数描述               :显示登陆界面
 428          *输入参数               :                                
 429          *返回值                         :       
 430          *全局变量                       :
 431          *调用模块                       :
 432          ***********************************************************
 433          *创建人                 :熊坚强
 434          *创建日期                       :2008-9-22
 435          ***********************************************************
 436          *修改人                         :
 437          *修改日期               :
 438          *注释                   :系统初始化放在第3屏显示
 439          **********************************************************/ 
 440          void ShowLandingFace(void)
 441          {       
 442   1          uint16 xdata fcolor,bcolor;
 443   1              fcolor=WHITE;//字体颜色
 444   1              bcolor=BLUE; //字体背景色,也是清屏色
 445   1          ShowLandingWord(32,112+544,0,fcolor,bcolor);
 446   1              ShowLandingWord(100,112+544,1,fcolor,bcolor);
 447   1              ShowLandingWord(168,112+544,2,fcolor,bcolor);
 448   1              ShowLandingWord(236,112+544,3,fcolor,bcolor);
 449   1              ShowLandingWord(304,112+544,4,fcolor,bcolor);
 450   1              Get_GT23_Data(0x00,0x2E,3);
 451   1              lcd_fangda_dis_text(352,100+544,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
 452   1              lcd_fangda_dis_text(384,100+544,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
 453   1              lcd_fangda_dis_text(416,100+544,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
 454   1              Set_VisualPage(2);
 455   1      }
 456          /**********************************************************
 457          *函数名称                       :ShowBedPage    
 458          *函数描述               :显示多少床到多少床数据
 459          *输入参数               :                                
 460          *返回值                         :       
 461          *全局变量                       :
 462          *调用模块                       :
 463          ***********************************************************
 464          *创建人                 :熊坚强
 465          *创建日期                       :2011-2-23
 466          ***********************************************************
 467          *修改人                         :
 468          *修改日期               :
 469          *注释                   :
 470          **********************************************************/ 
 471          void ShowBedPage(void)
 472          {       
 473   1              uint8  xdata  byData1,byData2;
 474   1              uint8  xdata i;
 475   1              uint8  *G2312_code;
 476   1              uint8  xdata  byData[8];
 477   1              uint16 xdata  fcolor,bcolor;
 478   1              uint16 xdata  DisplayAddr;
 479   1              uint8  xdata  DispalyCount;
 480   1          if(Modify_SEC_Name==0x01)
 481   1          {
 482   2            byData1=Page_Color[3];//字体颜色 
 483   2                byData2=Page_Color[4];//字体背景色,也是清屏色
 484   2                fcolor = ColorIndex[byData1];
C51 COMPILER V9.00   LCDDRIVER                                                             06/23/2017 13:33:25 PAGE 9   

 485   2                bcolor = ColorIndex[byData2];
 486   2          }
 487   1              else
 488   1              {
 489   2                fcolor=BLUE1;//字体颜色
 490   2                bcolor=WHITE; //字体背景色,也是清屏色
 491   2              }
 492   1              //-----------------------------------------------------------------
 493   1              Lcd_Fill(0,178,480,94,bcolor);
 494   1      
 495   1              stLocalControl.uiShortType  = LCD_SEC_ADDR;     
 496   1              stLocalControl.uiShortType  = stLocalControl.uiShortType+23;  //责任医生
 497   1              for(i=0;i<8;i++)
 498   1              {
 499   2                      byData[i]= FmReadByte(stLocalControl.uiShortType++);
 500   2              }
 501   1              
 502   1              G2312_code="责";
 503   1              Get_GT23_Data(*G2312_code,*(G2312_code+1),1);
 504   1              lcd_fangda_dis_text(0,193,16,16,1,1,fcolor,bcolor,GT23_Rec_Data);
 505   1              
 506   1              G2312_code="任";
 507   1              Get_GT23_Data(*G2312_code,*(G2312_code+1),1);
 508   1              lcd_fangda_dis_text(16,193,16,16,1,1,fcolor,bcolor,GT23_Rec_Data);      
 509   1              
 510   1              G2312_code="医";
 511   1              Get_GT23_Data(*G2312_code,*(G2312_code+1),1);
 512   1              lcd_fangda_dis_text(32,193,16,16,1,1,fcolor,bcolor,GT23_Rec_Data);
 513   1              
 514   1              G2312_code="生";
 515   1              Get_GT23_Data(*G2312_code,*(G2312_code+1),1);
 516   1              lcd_fangda_dis_text(48,193,16,16,1,1,fcolor,bcolor,GT23_Rec_Data);
 517   1      
 518   1              Get_GT23_Data(0x00,0x3a,1);
 519   1              lcd_fangda_dis_text(64,193,8,16,1,1,fcolor,bcolor,GT23_Rec_Data);
 520   1      
 521   1      
 522   1          DisplayAddr=72;                                          //初始显示地址x
 523   1              DispalyCount=0;                                                                          //初始显示
 524   1              for(i=0;i<8;i++)
 525   1              {
 526   2                if(byData[DispalyCount]>=0x20&&byData[DispalyCount]<=0x7E)
 527   2                {
 528   3                  Get_GT23_Data(0x00,byData[DispalyCount],3);
 529   3                  lcd_fangda_dis_text(DisplayAddr,193,16,32,1,1,fcolor,bcolor,GT23_Rec_Data); 
 530   3                  DisplayAddr=DisplayAddr+16;
 531   3                      DispalyCount++;
 532   3                }
 533   2                else if(byData[DispalyCount]>=0x81&&byData[DispalyCount]<=0xFe)
 534   2                {
 535   3                  Get_GT23_Data(byData[DispalyCount],byData[DispalyCount+1],3);
 536   3                  lcd_fangda_dis_text(DisplayAddr,193,32,32,1,1,fcolor,bcolor,GT23_Rec_Data); 
 537   3                  DisplayAddr=DisplayAddr+32;
 538   3                      DispalyCount+=2;
 539   3                }
 540   2                if(DispalyCount>7)
 541   2                break;
 542   2              }
 543   1      
 544   1              
 545   1              G2312_code="责";
 546   1              Get_GT23_Data(*G2312_code,*(G2312_code+1),1);
C51 COMPILER V9.00   LCDDRIVER                                                             06/23/2017 13:33:25 PAGE 10  

 547   1              lcd_fangda_dis_text(0,232,16,16,1,1,fcolor,bcolor,GT23_Rec_Data);
 548   1              
 549   1              G2312_code="任";
 550   1              Get_GT23_Data(*G2312_code,*(G2312_code+1),1);
 551   1              lcd_fangda_dis_text(16,232,16,16,1,1,fcolor,bcolor,GT23_Rec_Data);      
 552   1              
 553   1              G2312_code="护";
 554   1              Get_GT23_Data(*G2312_code,*(G2312_code+1),1);
 555   1              lcd_fangda_dis_text(32,232,16,16,1,1,fcolor,bcolor,GT23_Rec_Data);
 556   1              
 557   1              G2312_code="士";
 558   1              Get_GT23_Data(*G2312_code,*(G2312_code+1),1);
 559   1              lcd_fangda_dis_text(48,232,16,16,1,1,fcolor,bcolor,GT23_Rec_Data);
 560   1      
 561   1              Get_GT23_Data(0x00,0x3a,1);
 562   1              lcd_fangda_dis_text(64,232,8,16,1,1,fcolor,bcolor,GT23_Rec_Data);
 563   1      
 564   1              stLocalControl.uiShortType  = LCD_SEC_ADDR;     
 565   1              stLocalControl.uiShortType  = stLocalControl.uiShortType+31;  //责任护士
 566   1              for(i=0;i<8;i++)
 567   1              {
 568   2                      byData[i]= FmReadByte(stLocalControl.uiShortType++);
 569   2              }
 570   1      
 571   1      
 572   1          DisplayAddr=72;                                          //初始显示地址x
 573   1              DispalyCount=0;                                                                          //初始显示
 574   1              for(i=0;i<8;i++)
 575   1              {
 576   2                if(byData[DispalyCount]>=0x20&&byData[DispalyCount]<=0x7E)
 577   2                {
 578   3                  Get_GT23_Data(0x00,byData[DispalyCount],3);
 579   3                  lcd_fangda_dis_text(DisplayAddr,232,16,32,1,1,fcolor,bcolor,GT23_Rec_Data); 
 580   3                  DisplayAddr=DisplayAddr+16;
 581   3                      DispalyCount++;
 582   3                }
 583   2                else if(byData[DispalyCount]>=0x81&&byData[DispalyCount]<=0xFe)
 584   2                {
 585   3                  Get_GT23_Data(byData[DispalyCount],byData[DispalyCount+1],3);
 586   3                  lcd_fangda_dis_text(DisplayAddr,232,32,32,1,1,fcolor,bcolor,GT23_Rec_Data); 
 587   3                  DisplayAddr=DisplayAddr+32;
 588   3                      DispalyCount+=2;
 589   3                }
 590   2                if(DispalyCount>7)
 591   2                break;
 592   2              }
 593   1              
 594   1      
 595   1              DisplayAddr = 192;
 596   1              stLocalControl.uiShortType  = LCD_SEC_ADDR;     
 597   1              stLocalControl.uiShortType  += 39;      //定位到床1的最高位
 598   1              byData1=FmReadByte(stLocalControl.uiShortType);
 599   1              if((byData1>0x30)&&(byData1<0x39))
 600   1              {
 601   2                      Get_GT23_Data(0x00,byData1,3);
 602   2                      lcd_fangda_dis_text(DisplayAddr,192,16,32,2,2,fcolor,bcolor,GT23_Rec_Data);
 603   2                      DisplayAddr += 32;
 604   2                      
 605   2              }
 606   1              else
 607   1              {//不要显示
 608   2                      goto ShowBedPage1;
C51 COMPILER V9.00   LCDDRIVER                                                             06/23/2017 13:33:25 PAGE 11  

 609   2              }
 610   1              
 611   1      /*      if((byData1 == 0x20)||(byData1 ==0x30))
 612   1              {//不要显示
 613   1                      goto ShowBedPage1;
 614   1              }
 615   1              else 
 616   1              {
 617   1                      Get_GT23_Data(0x00,byData1,2);
 618   1                      lcd_fangda_dis_text(DisplayAddr,192,16,32,2,2,fcolor,bcolor,GT23_Rec_Data);
 619   1                      DisplayAddr += 32;
 620   1                      
 621   1              }*/
 622   1      
 623   1      
 624   1      ShowBedPage1:
 625   1              stLocalControl.uiShortType  = LCD_SEC_ADDR;     
 626   1              stLocalControl.uiShortType  += 14;  //开始显示多少床到多少床
 627   1              byData1=FmReadByte(stLocalControl.uiShortType++); 
 628   1              byData2=FmReadByte(stLocalControl.uiShortType++);
 629   1              Get_GT23_Data(0x00,byData1,3);
 630   1              lcd_fangda_dis_text(DisplayAddr,192,16,32,2,2,fcolor,bcolor,GT23_Rec_Data);
 631   1              DisplayAddr +=32;
 632   1              Get_GT23_Data(0x00,byData2,3);
 633   1              lcd_fangda_dis_text(DisplayAddr,192,16,32,2,2,fcolor,bcolor,GT23_Rec_Data);
 634   1              DisplayAddr +=32;
 635   1              
 636   1              Get_GT23_Data(0x00,0x2D,3);    //   -
 637   1              lcd_fangda_dis_text(DisplayAddr,188,16,32,2,2,fcolor,bcolor,GT23_Rec_Data);
 638   1              DisplayAddr +=32;
 639   1      
 640   1      
 641   1      
 642   1              stLocalControl.uiShortType  = LCD_SEC_ADDR;     
 643   1              stLocalControl.uiShortType  += 40;      //定位到床2的最高位
 644   1              byData1=FmReadByte(stLocalControl.uiShortType);
 645   1      
 646   1              if((byData1>0x30)&&(byData1<0x39))
 647   1              {
 648   2                      Get_GT23_Data(0x00,byData1,3);
 649   2                      lcd_fangda_dis_text(DisplayAddr,192,16,32,2,2,fcolor,bcolor,GT23_Rec_Data);
 650   2                      DisplayAddr += 32;
 651   2                      
 652   2              }       
 653   1              else 
 654   1              {//不要显示
 655   2                      goto ShowBedPage2;
 656   2              }       
 657   1      
 658   1      /*      if((byData1 == 0x20)||(byData1 ==0x30))
 659   1              {//不要显示
 660   1                      goto ShowBedPage2;
 661   1              }
 662   1              else 
 663   1              {
 664   1                      Get_GT23_Data(0x00,byData1,2);
 665   1                      lcd_fangda_dis_text(DisplayAddr,192,16,32,2,2,fcolor,bcolor,GT23_Rec_Data);
 666   1                      DisplayAddr += 32;
 667   1                      
 668   1              }*/     
 669   1      
 670   1      ShowBedPage2:   
C51 COMPILER V9.00   LCDDRIVER                                                             06/23/2017 13:33:25 PAGE 12  

 671   1              stLocalControl.uiShortType  = LCD_SEC_ADDR;     
 672   1              stLocalControl.uiShortType  += 16;  //定位到床2的后两位
 673   1              byData1=FmReadByte(stLocalControl.uiShortType++); 
 674   1              byData2=FmReadByte(stLocalControl.uiShortType++);
 675   1              Get_GT23_Data(0x00,byData1,3);
 676   1              lcd_fangda_dis_text(DisplayAddr,192,16,32,2,2,fcolor,bcolor,GT23_Rec_Data);
 677   1              DisplayAddr += 32;
 678   1              Get_GT23_Data(0x00,byData2,3);
 679   1              lcd_fangda_dis_text(DisplayAddr,192,16,32,2,2,fcolor,bcolor,GT23_Rec_Data);
 680   1              DisplayAddr += 32;
 681   1              Get_GT23_Data(0xB4,0xB2,3);    //   床
 682   1              lcd_fangda_dis_text(DisplayAddr,188,32,32,2,2,fcolor,bcolor,GT23_Rec_Data);
 683   1      }
 684          /**********************************************************
 685          *函数名称                       :ShowSecPage    
 686          *函数描述               :显示科室名称数据
 687          *输入参数               :                                
 688          *返回值                         :       
 689          *全局变量                       :
 690          *调用模块                       :
 691          ***********************************************************
 692          *创建人                 :熊坚强
 693          *创建日期                       :2011-2-23
 694          ***********************************************************
 695          *修改人                         :
 696          *修改日期               :
 697          *注释                   :
 698          **********************************************************/ 
 699          void ShowSecPage(void)
 700          {       
 701   1          uint8  xdata i;
 702   1              uint8  xdata  byData1,byData2;
 703   1              uint16 xdata  fcolor,bcolor;
 704   1              uint8  xdata  byData[14];
 705   1              uint16 xdata  DisplayAddr;
 706   1              uint8  xdata  DispalyCount;
 707   1          if(Modify_SEC_Name==0x01)
 708   1          {
 709   2            byData1=Page_Color[0];//字体颜色 
 710   2                byData2=Page_Color[1];//字体背景色,也是清屏色
 711   2                fcolor = ColorIndex[byData1];
 712   2                bcolor = ColorIndex[byData2]; 
 713   2          }
 714   1              else
 715   1              {
 716   2                fcolor=WHITE; //字体颜色
 717   2                bcolor=BLUE1; //字体背景色,也是清屏色
 718   2              }
 719   1              stLocalControl.uiShortType = LCD_SEC_ADDR;               //第一帧开始显示科室名称
 720   1              for(i=0;i<14;i++)
 721   1              byData[i]=FmReadByte(stLocalControl.uiShortType++);      //得到发送过来的数据
 722   1          DisplayAddr=16;                                          //初始显示地址
 723   1              DispalyCount=0;                                                                          //初始显示
 724   1              for(i=0;i<14;i++)
 725   1              {
 726   2                if(byData[DispalyCount]>=0x20&&byData[DispalyCount]<=0x7E)
 727   2                {
 728   3                  Get_GT23_Data(0x00,byData[DispalyCount],3);
 729   3                  lcd_fangda_dis_text(DisplayAddr,24,16,32,2,2,fcolor,bcolor,GT23_Rec_Data); 
 730   3                  DisplayAddr=DisplayAddr+32;
 731   3                      DispalyCount++;
 732   3                }
C51 COMPILER V9.00   LCDDRIVER                                                             06/23/2017 13:33:25 PAGE 13  

 733   2                else if(byData[DispalyCount]>=0x81&&byData[DispalyCount]<=0xFe)
 734   2                {
 735   3                  Get_GT23_Data(byData[DispalyCount],byData[DispalyCount+1],3);
 736   3                  lcd_fangda_dis_text(DisplayAddr,20,32,32,2,2,fcolor,bcolor,GT23_Rec_Data); 
 737   3                  DisplayAddr=DisplayAddr+64;
 738   3                      DispalyCount+=2;
 739   3                }
 740   2                if(DispalyCount>13)
 741   2                break;
 742   2              }
 743   1      }
 744          void ShowSerchRoomCom(uint8 xdata  page)
 745          {
 746   1              uint16 xdata fcolor,bcolor;
 747   1              fcolor=WHITE;//字体颜色
 748   1              bcolor=BLUE; //字体背景色,也是清屏色
 749   1              Lcd_Fill(25,277,430,1,fcolor);
 750   1              Lcd_Fill(25,537,430,1,fcolor);
 751   1              Lcd_Fill(25,277,1,260,fcolor);
 752   1              Lcd_Fill(455,277,1,261,fcolor);
 753   1              Lcd_Fill(136,277,1,260,fcolor);
 754   1              Lcd_Fill(25,67+272,430,1,fcolor);
 755   1              Lcd_Fill(25,107+272,430,1,fcolor);
 756   1              Lcd_Fill(25,147+272,430,1,fcolor);
 757   1              Lcd_Fill(25,187+272,430,1,fcolor);
 758   1              Lcd_Fill(25,227+272,430,1,fcolor);
 759   1              //护士号
 760   1              Get_GT23_Data(0xBB,0xA4,3);
 761   1              lcd_fangda_dis_text(30,272+24,32,32,1,1,fcolor,bcolor,GT23_Rec_Data);
 762   1              Get_GT23_Data(0xCA,0xBF,3);
 763   1              lcd_fangda_dis_text(65,272+24,32,32,1,1,fcolor,bcolor,GT23_Rec_Data);
 764   1              Get_GT23_Data(0xBA,0xC5,3);
 765   1              lcd_fangda_dis_text(100,272+24,32,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
 766   1              //查房时间
 767   1              Get_GT23_Data(0xB2,0xE9,3);
 768   1              lcd_fangda_dis_text(149,272+24,32,32,1,1,fcolor,bcolor,GT23_Rec_Data);
 769   1              Get_GT23_Data(0xB7,0xBF,3);
 770   1              lcd_fangda_dis_text(218,272+24,32,32,1,1,fcolor,bcolor,GT23_Rec_Data);
 771   1              Get_GT23_Data(0xCA,0xB1,3);
 772   1              lcd_fangda_dis_text(287,272+24,32,32,1,1,fcolor,bcolor,GT23_Rec_Data);
 773   1              Get_GT23_Data(0xBC,0xE4,3);
 774   1              lcd_fangda_dis_text(357,272+24,32,32,1,1,fcolor,bcolor,GT23_Rec_Data);
 775   1          Get_GT23_Data(0x00,0x28,3);
 776   1              lcd_fangda_dis_text(394,24+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
 777   1          Get_GT23_Data(0x00,0x30+page,3);
 778   1              lcd_fangda_dis_text(414,25+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
 779   1              Get_GT23_Data(0x00,0x29,3);
 780   1              lcd_fangda_dis_text(434,24+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
 781   1              Lcd_Fill(63,73+272,40,32,bcolor);
 782   1          Lcd_Fill(146,70+272,305,32,bcolor);
 783   1              Lcd_Fill(63,113+272,40,32,bcolor);
 784   1              Lcd_Fill(146,110+272,305,32,bcolor);
 785   1              Lcd_Fill(63,153+272,40,32,bcolor);
 786   1              Lcd_Fill(146,150+272,305,32,bcolor);
 787   1              Lcd_Fill(63,193+272,40,32,bcolor);
 788   1              Lcd_Fill(146,190+272,305,32,bcolor);
 789   1              Lcd_Fill(63,233+272,40,32,bcolor);
 790   1              Lcd_Fill(146,230+272,305,32,bcolor);
 791   1      }
 792          /**********************************************************
 793          *函数名称                       :ShowSerchRommPage1     
 794          *函数描述               :显示查房界面1数据
C51 COMPILER V9.00   LCDDRIVER                                                             06/23/2017 13:33:25 PAGE 14  

 795          *输入参数               :                                
 796          *返回值                         :       
 797          *全局变量                       :
 798          *调用模块                       :
 799          ***********************************************************
 800          *创建人                 :熊坚强
 801          *创建日期                       :2011-3-10
 802          ***********************************************************
 803          *修改人                         :
 804          *修改日期               :
 805          *注释                   : 查房信息存储在第2屏
 806          **********************************************************/ 
 807          void ShowSerchRommPage1(void)
 808          {
 809   1          uint16 xdata fcolor,bcolor;
 810   1          uint8  xdata serchroomcount=0;
 811   1              uint8  xdata nursenumber=0,nursenumber1,nursenumber2;
 812   1              uint8  xdata minute=0,minute1,minute2;
 813   1              uint8  xdata hour=0,hour1,hour2;        
 814   1              uint8  xdata day=0,day1,day2;
 815   1              uint8  xdata month=0,month1,month2;
 816   1              uint8  xdata year=0,year1,year2;
 817   1              fcolor=WHITE;//字体颜色
 818   1              bcolor=BLUE; //字体背景色,也是清屏色
 819   1              if(bIndication)
 820   1              {       
 821   2                      return;   //有呼叫信息存在,退出
 822   2              }
 823   1              if(First_Serchroom_Flag)
 824   1              {
 825   2                 First_Serchroom_Flag=0;
 826   2                 Lcd_Fill(0,110+272,480,82,bcolor);
 827   2              }
 828   1              ShowSerchRoomCom(1);
 829   1              serchroomcount=SerchRoom;       //读取护士查房次数
 830   1              if(Page_Flag==0)         //第0页的查房记录显示，即开始的5条查房记录
 831   1               {
 832   2                  if(serchroomcount>0)
 833   2                  {
 834   3                        //显示第一行护士号及查房时间
 835   3                    nursenumber=FmReadByte(Serch_Room_ADDR+0x1000);
 836   3                        nursenumber=nursenumber&0x7F;
 837   3                        nursenumber=nursenumber%100;
 838   3                        nursenumber1=nursenumber%10+0x30;//个位
 839   3                        nursenumber2=nursenumber/10+0x30;//十位
 840   3                    //第一行护士编号
 841   3                    Get_GT23_Data(0x00,nursenumber2,3);
 842   3                    lcd_fangda_dis_text(63,73+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);     
 843   3                    Get_GT23_Data(0x00,nursenumber1,3);
 844   3                    lcd_fangda_dis_text(83,73+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
 845   3                //第一行查房时间
 846   3                        minute=FmReadByte(Serch_Room_TIME_ADDR+0x1000);
 847   3                        hour=FmReadByte(Serch_Room_TIME_ADDR+0x1001);
 848   3                        day=FmReadByte(Serch_Room_TIME_ADDR+0x1002);
 849   3                        month=FmReadByte(Serch_Room_TIME_ADDR+0x1003);
 850   3                        year=FmReadByte(Serch_Room_TIME_ADDR+0x1004);
 851   3                        hour1=hour%10+0x30;//个位
 852   3                        hour2=hour/10+0x30;//十位
 853   3                        minute1=minute%10+0x30;//个位
 854   3                        minute2=minute/10+0x30;//十位
 855   3                        day1=day%10+0x30;//个位
 856   3                        day2=day/10+0x30;//十位
C51 COMPILER V9.00   LCDDRIVER                                                             06/23/2017 13:33:25 PAGE 15  

 857   3                        month1=month%10+0x30;//个位
 858   3                        month2=month/10+0x30;//十位
 859   3                        year1=year%10+0x30;//个位
 860   3                        year2=year/10+0x30;//十位
 861   3                       //----------------------------------------------------------------------
 862   3                       //----------------------------------------------------------------------
 863   3                        Get_GT23_Data(0x00,0x32,3);
 864   3                    lcd_fangda_dis_text(146,73+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);    
 865   3                    Get_GT23_Data(0x00,0x30,3);
 866   3                    lcd_fangda_dis_text(163,73+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
 867   3                        Get_GT23_Data(0x00,year2,3);
 868   3                        lcd_fangda_dis_text(180,73+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);        
 869   3                    Get_GT23_Data(0x00,year1,3);
 870   3                    lcd_fangda_dis_text(197,73+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
 871   3                    Get_GT23_Data(0x00,0x2F,3);
 872   3                    lcd_fangda_dis_text(214,71+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);// "/"
 873   3                    Get_GT23_Data(0x00,month2,3);
 874   3                    lcd_fangda_dis_text(231,73+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);    
 875   3                    Get_GT23_Data(0x00,month1,3);
 876   3                    lcd_fangda_dis_text(248,73+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);    
 877   3                    Get_GT23_Data(0x00,0x2F,3);
 878   3                    lcd_fangda_dis_text(265,71+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);// "/"
 879   3                        Get_GT23_Data(0x00,day2,3);
 880   3                    lcd_fangda_dis_text(282,73+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);    
 881   3                    Get_GT23_Data(0x00,day1,3);
 882   3                    lcd_fangda_dis_text(299,73+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);    
 883   3                    Get_GT23_Data(0x00,hour2,3);
 884   3                    lcd_fangda_dis_text(356,73+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);    
 885   3                    Get_GT23_Data(0x00,hour1,3);
 886   3                    lcd_fangda_dis_text(373,73+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
 887   3                    Get_GT23_Data(0x00,0x3A,3);
 888   3                    lcd_fangda_dis_text(395,68+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);//":"
 889   3                    Get_GT23_Data(0x00,minute2,3);
 890   3                    lcd_fangda_dis_text(407,73+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);    
 891   3                    Get_GT23_Data(0x00,minute1,3);
 892   3                    lcd_fangda_dis_text(424,73+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);    
 893   3                      }
 894   2                       //---------------------------------------------------------------------
 895   2                  //第二行护士编号
 896   2                      if(serchroomcount>1)
 897   2                      {
 898   3                    nursenumber=FmReadByte(Serch_Room_ADDR+0x2000);
 899   3                        nursenumber=nursenumber&0x7F;
 900   3                        nursenumber=nursenumber%100;
 901   3                        nursenumber1=nursenumber%10+0x30;//个位
 902   3                        nursenumber2=nursenumber/10+0x30;//十位
 903   3                    Get_GT23_Data(0x00,nursenumber2,3);
 904   3                    lcd_fangda_dis_text(63,113+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);    
 905   3                    Get_GT23_Data(0x00,nursenumber1,3);
 906   3                    lcd_fangda_dis_text(83,113+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
 907   3                    //第二行查房时间
 908   3                        minute=FmReadByte(Serch_Room_TIME_ADDR+0x2000);
 909   3                        hour=FmReadByte(Serch_Room_TIME_ADDR+0x2001);
 910   3                        day=FmReadByte(Serch_Room_TIME_ADDR+0x2002);
 911   3                        month=FmReadByte(Serch_Room_TIME_ADDR+0x2003);
 912   3                        year=FmReadByte(Serch_Room_TIME_ADDR+0x2004);
 913   3                        hour1=hour%10+0x30;//个位
 914   3                        hour2=hour/10+0x30;//十位
 915   3                        minute1=minute%10+0x30;//个位
 916   3                        minute2=minute/10+0x30;//十位
 917   3                        day1=day%10+0x30;//个位
 918   3                        day2=day/10+0x30;//十位
C51 COMPILER V9.00   LCDDRIVER                                                             06/23/2017 13:33:25 PAGE 16  

 919   3                        month1=month%10+0x30;//个位
 920   3                        month2=month/10+0x30;//十位
 921   3                        year1=year%10+0x30;//个位
 922   3                        year2=year/10+0x30;//十位
 923   3                      //------------------------------------------------------------------------
 924   3                      //------------------------------------------------------------------------
 925   3                    Get_GT23_Data(0x00,0x32,3);
 926   3                    lcd_fangda_dis_text(146,113+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
 927   3                    Get_GT23_Data(0x00,0x30,3);
 928   3                    lcd_fangda_dis_text(163,113+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
 929   3                        Get_GT23_Data(0x00,year2,3);
 930   3                        lcd_fangda_dis_text(180,113+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);       
 931   3                    Get_GT23_Data(0x00,year1,3);
 932   3                    lcd_fangda_dis_text(197,113+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
 933   3                    Get_GT23_Data(0x00,0x2F,3);
 934   3                    lcd_fangda_dis_text(214,111+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);// "/"
 935   3                    Get_GT23_Data(0x00,month2,3);
 936   3                    lcd_fangda_dis_text(231,113+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
 937   3                    Get_GT23_Data(0x00,month1,3);
 938   3                    lcd_fangda_dis_text(248,113+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
 939   3                    Get_GT23_Data(0x00,0x2F,3);
 940   3                    lcd_fangda_dis_text(265,111+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);// "/"
 941   3                        Get_GT23_Data(0x00,day2,3);
 942   3                    lcd_fangda_dis_text(282,113+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
 943   3                    Get_GT23_Data(0x00,day1,3);
 944   3                    lcd_fangda_dis_text(299,113+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
 945   3                    Get_GT23_Data(0x00,hour2,3);
 946   3                    lcd_fangda_dis_text(356,113+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
 947   3                    Get_GT23_Data(0x00,hour1,3);
 948   3                    lcd_fangda_dis_text(373,113+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
 949   3                    Get_GT23_Data(0x00,0x3A,3);
 950   3                    lcd_fangda_dis_text(395,108+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);//":"
 951   3                    Get_GT23_Data(0x00,minute2,3);
 952   3                    lcd_fangda_dis_text(407,113+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
 953   3                    Get_GT23_Data(0x00,minute1,3);
 954   3                    lcd_fangda_dis_text(424,113+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
 955   3                      }       
 956   2                      //-------------------------------------------------------------------------
 957   2                      //-------------------------------------------------------------------------
 958   2              //第三行护士编号
 959   2                      if(serchroomcount>2)
 960   2                      {
 961   3                    nursenumber=FmReadByte(Serch_Room_ADDR+0x3000);
 962   3                    nursenumber=nursenumber&0x7F;
 963   3                    nursenumber=nursenumber%100;
 964   3                    nursenumber1=nursenumber%10+0x30;//个位
 965   3                    nursenumber2=nursenumber/10+0x30;//十位
 966   3                    Get_GT23_Data(0x00,nursenumber2,3);
 967   3                    lcd_fangda_dis_text(63,153+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);    
 968   3                    Get_GT23_Data(0x00,nursenumber1,3);
 969   3                    lcd_fangda_dis_text(83,153+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
 970   3                    //第三行查房时间
 971   3                    minute=FmReadByte(Serch_Room_TIME_ADDR+0x3000);
 972   3                        hour=FmReadByte(Serch_Room_TIME_ADDR+0x3001);
 973   3                        day=FmReadByte(Serch_Room_TIME_ADDR+0x3002);
 974   3                        month=FmReadByte(Serch_Room_TIME_ADDR+0x3003);
 975   3                        year=FmReadByte(Serch_Room_TIME_ADDR+0x3004);
 976   3                        hour1=hour%10+0x30;//个位
 977   3                        hour2=hour/10+0x30;//十位
 978   3                        minute1=minute%10+0x30;//个位
 979   3                        minute2=minute/10+0x30;//十位
 980   3                        day1=day%10+0x30;//个位
C51 COMPILER V9.00   LCDDRIVER                                                             06/23/2017 13:33:25 PAGE 17  

 981   3                        day2=day/10+0x30;//十位
 982   3                        month1=month%10+0x30;//个位
 983   3                        month2=month/10+0x30;//十位
 984   3                        year1=year%10+0x30;//个位
 985   3                        year2=year/10+0x30;//十位
 986   3                    Get_GT23_Data(0x00,0x32,3);
 987   3                    lcd_fangda_dis_text(146,153+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
 988   3                    Get_GT23_Data(0x00,0x30,3);
 989   3                    lcd_fangda_dis_text(163,153+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
 990   3                        Get_GT23_Data(0x00,year2,3);
 991   3                        lcd_fangda_dis_text(180,153+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);       
 992   3                    Get_GT23_Data(0x00,year1,3);
 993   3                    lcd_fangda_dis_text(197,153+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
 994   3                    Get_GT23_Data(0x00,0x2F,3);
 995   3                    lcd_fangda_dis_text(214,151+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);// "/"
 996   3                    Get_GT23_Data(0x00,month2,3);
 997   3                    lcd_fangda_dis_text(231,153+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
 998   3                    Get_GT23_Data(0x00,month1,3);
 999   3                    lcd_fangda_dis_text(248,153+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
1000   3                    Get_GT23_Data(0x00,0x2F,3);
1001   3                    lcd_fangda_dis_text(265,151+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);// "/"
1002   3                        Get_GT23_Data(0x00,day2,3);
1003   3                    lcd_fangda_dis_text(282,153+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
1004   3                    Get_GT23_Data(0x00,day1,3);
1005   3                    lcd_fangda_dis_text(299,153+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
1006   3                    Get_GT23_Data(0x00,hour2,3);
1007   3                    lcd_fangda_dis_text(356,153+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
1008   3                    Get_GT23_Data(0x00,hour1,3);
1009   3                    lcd_fangda_dis_text(373,153+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
1010   3                    Get_GT23_Data(0x00,0x3A,3);
1011   3                    lcd_fangda_dis_text(395,148+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);//":"
1012   3                    Get_GT23_Data(0x00,minute2,3);
1013   3                    lcd_fangda_dis_text(407,153+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
1014   3                    Get_GT23_Data(0x00,minute1,3);
1015   3                    lcd_fangda_dis_text(424,153+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
1016   3                      }       
1017   2                  //第四行护士编号
1018   2                  if(serchroomcount>3)
1019   2                  {
1020   3                    nursenumber=FmReadByte(Serch_Room_ADDR+0x4000);
1021   3                    nursenumber=nursenumber&0x7F;
1022   3                    nursenumber=nursenumber%100;
1023   3                    nursenumber1=nursenumber%10+0x30;//个位
1024   3                    nursenumber2=nursenumber/10+0x30;//十位
1025   3                    Get_GT23_Data(0x00,nursenumber2,3);
1026   3                    lcd_fangda_dis_text(63,193+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);    
1027   3                    Get_GT23_Data(0x00,nursenumber1,3);
1028   3                    lcd_fangda_dis_text(83,193+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
1029   3                    //第四行查房时间
1030   3                    minute=FmReadByte(Serch_Room_TIME_ADDR+0x4000);
1031   3                        hour=FmReadByte(Serch_Room_TIME_ADDR+0x4001);
1032   3                        day=FmReadByte(Serch_Room_TIME_ADDR+0x4002);
1033   3                        month=FmReadByte(Serch_Room_TIME_ADDR+0x4003);
1034   3                        year=FmReadByte(Serch_Room_TIME_ADDR+0x4004);
1035   3                        hour1=hour%10+0x30;//个位
1036   3                        hour2=hour/10+0x30;//十位
1037   3                        minute1=minute%10+0x30;//个位
1038   3                        minute2=minute/10+0x30;//十位
1039   3                        day1=day%10+0x30;//个位
1040   3                        day2=day/10+0x30;//十位
1041   3                        month1=month%10+0x30;//个位
1042   3                        month2=month/10+0x30;//十位
C51 COMPILER V9.00   LCDDRIVER                                                             06/23/2017 13:33:25 PAGE 18  

1043   3                        year1=year%10+0x30;//个位
1044   3                        year2=year/10+0x30;//十位
1045   3                    Get_GT23_Data(0x00,0x32,3);
1046   3                    lcd_fangda_dis_text(146,193+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
1047   3                    Get_GT23_Data(0x00,0x30,3);
1048   3                    lcd_fangda_dis_text(163,193+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
1049   3                        Get_GT23_Data(0x00,year2,3);
1050   3                        lcd_fangda_dis_text(180,193+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);       
1051   3                    Get_GT23_Data(0x00,year1,3);
1052   3                    lcd_fangda_dis_text(197,193+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
1053   3                    Get_GT23_Data(0x00,0x2F,3);
1054   3                    lcd_fangda_dis_text(214,191+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);// "/"
1055   3                    Get_GT23_Data(0x00,month2,3);
1056   3                    lcd_fangda_dis_text(231,193+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
1057   3                    Get_GT23_Data(0x00,month1,3);
1058   3                    lcd_fangda_dis_text(248,193+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
1059   3                    Get_GT23_Data(0x00,0x2F,3);
1060   3                    lcd_fangda_dis_text(265,191+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);// "/"
1061   3                        Get_GT23_Data(0x00,day2,3);
1062   3                    lcd_fangda_dis_text(282,193+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
1063   3                    Get_GT23_Data(0x00,day1,3);
1064   3                    lcd_fangda_dis_text(299,193+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
1065   3                    Get_GT23_Data(0x00,hour2,3);
1066   3                    lcd_fangda_dis_text(356,193+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
1067   3                    Get_GT23_Data(0x00,hour1,3);
1068   3                    lcd_fangda_dis_text(373,193+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
1069   3                    Get_GT23_Data(0x00,0x3A,3);
1070   3                    lcd_fangda_dis_text(395,188+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);//":"
1071   3                    Get_GT23_Data(0x00,minute2,3);
1072   3                    lcd_fangda_dis_text(407,193+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
1073   3                    Get_GT23_Data(0x00,minute1,3);
1074   3                    lcd_fangda_dis_text(424,193+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
1075   3                      }
1076   2                      if(serchroomcount>4)
1077   2                      {
1078   3                   //第五行护士编号
1079   3                    nursenumber=FmReadByte(Serch_Room_ADDR+0x5000);
1080   3                    nursenumber=nursenumber&0x7F;
1081   3                    nursenumber=nursenumber%100;
1082   3                    nursenumber1=nursenumber%10+0x30;//个位
1083   3                    nursenumber2=nursenumber/10+0x30;//十位
1084   3                    Get_GT23_Data(0x00,nursenumber2,3);
1085   3                    lcd_fangda_dis_text(63,232+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);    
1086   3                    Get_GT23_Data(0x00,nursenumber1,3);
1087   3                    lcd_fangda_dis_text(83,232+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
1088   3                    //第五行查房时间
1089   3                    minute=FmReadByte(Serch_Room_TIME_ADDR+0x5000);
1090   3                        hour=FmReadByte(Serch_Room_TIME_ADDR+0x5001);
1091   3                        day=FmReadByte(Serch_Room_TIME_ADDR+0x5002);
1092   3                        month=FmReadByte(Serch_Room_TIME_ADDR+0x5003);
1093   3                        year=FmReadByte(Serch_Room_TIME_ADDR+0x5004);
1094   3                        hour1=hour%10+0x30;//个位
1095   3                        hour2=hour/10+0x30;//十位
1096   3                        minute1=minute%10+0x30;//个位
1097   3                        minute2=minute/10+0x30;//十位
1098   3                        day1=day%10+0x30;//个位
1099   3                        day2=day/10+0x30;//十位
1100   3                        month1=month%10+0x30;//个位
1101   3                        month2=month/10+0x30;//十位
1102   3                        year1=year%10+0x30;//个位
1103   3                        year2=year/10+0x30;//十位
1104   3                    Get_GT23_Data(0x00,0x32,3);
C51 COMPILER V9.00   LCDDRIVER                                                             06/23/2017 13:33:25 PAGE 19  

1105   3                    lcd_fangda_dis_text(146,232+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
1106   3                    Get_GT23_Data(0x00,0x30,3);
1107   3                    lcd_fangda_dis_text(163,232+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
1108   3                    Get_GT23_Data(0x00,year2,3);
1109   3                    lcd_fangda_dis_text(180,232+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
1110   3                    Get_GT23_Data(0x00,year1,3);
1111   3                    lcd_fangda_dis_text(197,232+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
1112   3                    Get_GT23_Data(0x00,0x2F,3);
1113   3                    lcd_fangda_dis_text(214,230+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);// "/"
1114   3                    Get_GT23_Data(0x00,month2,3);
1115   3                    lcd_fangda_dis_text(231,232+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
1116   3                    Get_GT23_Data(0x00,month1,3);
1117   3                    lcd_fangda_dis_text(248,232+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
1118   3                    Get_GT23_Data(0x00,0x2F,3);
1119   3                    lcd_fangda_dis_text(265,230+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);// "/"
1120   3                    Get_GT23_Data(0x00,day2,3);
1121   3                    lcd_fangda_dis_text(282,232+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
1122   3                    Get_GT23_Data(0x00,day1,3);
1123   3                    lcd_fangda_dis_text(299,232+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
1124   3                    Get_GT23_Data(0x00,hour2,3);
1125   3                    lcd_fangda_dis_text(356,232+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
1126   3                    Get_GT23_Data(0x00,hour1,3);
1127   3                    lcd_fangda_dis_text(373,232+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
1128   3                    Get_GT23_Data(0x00,0x3A,3);
1129   3                    lcd_fangda_dis_text(395,228+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);//":"
1130   3                    Get_GT23_Data(0x00,minute2,3);
1131   3                    lcd_fangda_dis_text(407,232+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
1132   3                    Get_GT23_Data(0x00,minute1,3);
1133   3                    lcd_fangda_dis_text(424,232+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
1134   3                      }
1135   2              }
1136   1        else
1137   1        {              //显示第一行护士号及查房时间
1138   2                   nursenumber=FmReadByte(Serch_Room_ADDR+0x1000);
1139   2                       nursenumber=nursenumber&0x7F;
1140   2                       nursenumber=nursenumber%100;
1141   2                       nursenumber1=nursenumber%10+0x30;//个位
1142   2                       nursenumber2=nursenumber/10+0x30;//十位
1143   2                       //Lcd_Fill(63,73+272,40,32,bcolor);
1144   2               //Lcd_Fill(146,70+272,305,32,bcolor);
1145   2                   //第一行护士编号
1146   2                   Get_GT23_Data(0x00,nursenumber2,3);
1147   2                   lcd_fangda_dis_text(63,73+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);      
1148   2                   Get_GT23_Data(0x00,nursenumber1,3);
1149   2                   lcd_fangda_dis_text(83,73+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
1150   2               //第一行查房时间
1151   2                       minute=FmReadByte(Serch_Room_TIME_ADDR+0x1000);
1152   2                       hour=FmReadByte(Serch_Room_TIME_ADDR+0x1001);
1153   2                       day=FmReadByte(Serch_Room_TIME_ADDR+0x1002);
1154   2                       month=FmReadByte(Serch_Room_TIME_ADDR+0x1003);
1155   2                       year=FmReadByte(Serch_Room_TIME_ADDR+0x1004);
1156   2                       hour1=hour%10+0x30;//个位
1157   2                       hour2=hour/10+0x30;//十位
1158   2                       minute1=minute%10+0x30;//个位
1159   2                       minute2=minute/10+0x30;//十位
1160   2                       day1=day%10+0x30;//个位
1161   2                       day2=day/10+0x30;//十位
1162   2                       month1=month%10+0x30;//个位
1163   2                       month2=month/10+0x30;//十位
1164   2                       year1=year%10+0x30;//个位
1165   2                       year2=year/10+0x30;//十位
1166   2                       //----------------------------------------------------------------------
C51 COMPILER V9.00   LCDDRIVER                                                             06/23/2017 13:33:25 PAGE 20  

1167   2                       //----------------------------------------------------------------------
1168   2                       Get_GT23_Data(0x00,0x32,3);
1169   2                   lcd_fangda_dis_text(146,73+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);     
1170   2                   Get_GT23_Data(0x00,0x30,3);
1171   2                   lcd_fangda_dis_text(163,73+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
1172   2                       Get_GT23_Data(0x00,year2,3);
1173   2                       lcd_fangda_dis_text(180,73+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data); 
1174   2                   Get_GT23_Data(0x00,year1,3);
1175   2                   lcd_fangda_dis_text(197,73+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
1176   2                   Get_GT23_Data(0x00,0x2F,3);
1177   2                   lcd_fangda_dis_text(214,71+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);// "/"
1178   2                   Get_GT23_Data(0x00,month2,3);
1179   2                   lcd_fangda_dis_text(231,73+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);     
1180   2                   Get_GT23_Data(0x00,month1,3);
1181   2                   lcd_fangda_dis_text(248,73+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);     
1182   2                   Get_GT23_Data(0x00,0x2F,3);
1183   2                   lcd_fangda_dis_text(265,71+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);// "/"
1184   2                       Get_GT23_Data(0x00,day2,3);
1185   2                   lcd_fangda_dis_text(282,73+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);     
1186   2                   Get_GT23_Data(0x00,day1,3);
1187   2                   lcd_fangda_dis_text(299,73+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);     
1188   2                   Get_GT23_Data(0x00,hour2,3);
1189   2                   lcd_fangda_dis_text(356,73+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);     
1190   2                   Get_GT23_Data(0x00,hour1,3);
1191   2                   lcd_fangda_dis_text(373,73+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
1192   2                   Get_GT23_Data(0x00,0x3A,3);
1193   2                   lcd_fangda_dis_text(395,68+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);//":"
1194   2                   Get_GT23_Data(0x00,minute2,3);
1195   2                   lcd_fangda_dis_text(407,73+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);     
1196   2                   Get_GT23_Data(0x00,minute1,3);
1197   2                   lcd_fangda_dis_text(424,73+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);     
1198   2                       //---------------------------------------------------------------------
1199   2                  //第二行护士编号
1200   2                      // Lcd_Fill(63,113+272,40,32,bcolor);
1201   2                  // Lcd_Fill(146,110+272,305,32,bcolor);
1202   2                   nursenumber=FmReadByte(Serch_Room_ADDR+0x2000);
1203   2                       nursenumber=nursenumber&0x7F;
1204   2                       nursenumber=nursenumber%100;
1205   2                       nursenumber1=nursenumber%10+0x30;//个位
1206   2                       nursenumber2=nursenumber/10+0x30;//十位
1207   2                   Get_GT23_Data(0x00,nursenumber2,3);
1208   2                   lcd_fangda_dis_text(63,113+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);     
1209   2                   Get_GT23_Data(0x00,nursenumber1,3);
1210   2                   lcd_fangda_dis_text(83,113+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
1211   2                  //第二行查房时间
1212   2                       minute=FmReadByte(Serch_Room_TIME_ADDR+0x2000);
1213   2                       hour=FmReadByte(Serch_Room_TIME_ADDR+0x2001);
1214   2                       day=FmReadByte(Serch_Room_TIME_ADDR+0x2002);
1215   2                       month=FmReadByte(Serch_Room_TIME_ADDR+0x2003);
1216   2                       year=FmReadByte(Serch_Room_TIME_ADDR+0x2004);
1217   2                       hour1=hour%10+0x30;//个位
1218   2                       hour2=hour/10+0x30;//十位
1219   2                       minute1=minute%10+0x30;//个位
1220   2                       minute2=minute/10+0x30;//十位
1221   2                       day1=day%10+0x30;//个位
1222   2                       day2=day/10+0x30;//十位
1223   2                       month1=month%10+0x30;//个位
1224   2                       month2=month/10+0x30;//十位
1225   2                       year1=year%10+0x30;//个位
1226   2                       year2=year/10+0x30;//十位
1227   2                      //------------------------------------------------------------------------
1228   2                      //------------------------------------------------------------------------
C51 COMPILER V9.00   LCDDRIVER                                                             06/23/2017 13:33:25 PAGE 21  

1229   2                   Get_GT23_Data(0x00,0x32,3);
1230   2                   lcd_fangda_dis_text(146,113+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);    
1231   2                   Get_GT23_Data(0x00,0x30,3);
1232   2                   lcd_fangda_dis_text(163,113+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
1233   2                       Get_GT23_Data(0x00,year2,3);
1234   2                       lcd_fangda_dis_text(180,113+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);        
1235   2                   Get_GT23_Data(0x00,year1,3);
1236   2                   lcd_fangda_dis_text(197,113+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
1237   2                   Get_GT23_Data(0x00,0x2F,3);
1238   2                   lcd_fangda_dis_text(214,111+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);// "/"
1239   2                   Get_GT23_Data(0x00,month2,3);
1240   2                   lcd_fangda_dis_text(231,113+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);    
1241   2                   Get_GT23_Data(0x00,month1,3);
1242   2                   lcd_fangda_dis_text(248,113+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);    
1243   2                   Get_GT23_Data(0x00,0x2F,3);
1244   2                   lcd_fangda_dis_text(265,111+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);// "/"
1245   2                       Get_GT23_Data(0x00,day2,3);
1246   2                   lcd_fangda_dis_text(282,113+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);    
1247   2                   Get_GT23_Data(0x00,day1,3);
1248   2                   lcd_fangda_dis_text(299,113+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);    
1249   2                   Get_GT23_Data(0x00,hour2,3);
1250   2                   lcd_fangda_dis_text(356,113+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);    
1251   2                   Get_GT23_Data(0x00,hour1,3);
1252   2                   lcd_fangda_dis_text(373,113+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
1253   2                   Get_GT23_Data(0x00,0x3A,3);
1254   2                   lcd_fangda_dis_text(395,108+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);//":"
1255   2                   Get_GT23_Data(0x00,minute2,3);
1256   2                   lcd_fangda_dis_text(407,113+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);    
1257   2                   Get_GT23_Data(0x00,minute1,3);
1258   2                   lcd_fangda_dis_text(424,113+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);    
1259   2                      //-------------------------------------------------------------------------
1260   2                      //-------------------------------------------------------------------------
1261   2              //第三行护士编号
1262   2                      // Lcd_Fill(63,153+272,40,32,bcolor);
1263   2                  // Lcd_Fill(146,150+272,305,32,bcolor);
1264   2                   nursenumber=FmReadByte(Serch_Room_ADDR+0x3000);
1265   2                   nursenumber=nursenumber&0x7F;
1266   2                   nursenumber=nursenumber%100;
1267   2                   nursenumber1=nursenumber%10+0x30;//个位
1268   2                   nursenumber2=nursenumber/10+0x30;//十位
1269   2                   Get_GT23_Data(0x00,nursenumber2,3);
1270   2                   lcd_fangda_dis_text(63,153+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);     
1271   2                   Get_GT23_Data(0x00,nursenumber1,3);
1272   2                   lcd_fangda_dis_text(83,153+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
1273   2                 //第三行查房时间
1274   2                   minute=FmReadByte(Serch_Room_TIME_ADDR+0x3000);
1275   2                       hour=FmReadByte(Serch_Room_TIME_ADDR+0x3001);
1276   2                       day=FmReadByte(Serch_Room_TIME_ADDR+0x3002);
1277   2                       month=FmReadByte(Serch_Room_TIME_ADDR+0x3003);
1278   2                       year=FmReadByte(Serch_Room_TIME_ADDR+0x3004);
1279   2                       hour1=hour%10+0x30;//个位
1280   2                       hour2=hour/10+0x30;//十位
1281   2                       minute1=minute%10+0x30;//个位
1282   2                       minute2=minute/10+0x30;//十位
1283   2                       day1=day%10+0x30;//个位
1284   2                       day2=day/10+0x30;//十位
1285   2                       month1=month%10+0x30;//个位
1286   2                       month2=month/10+0x30;//十位
1287   2                       year1=year%10+0x30;//个位
1288   2                       year2=year/10+0x30;//十位
1289   2                   Get_GT23_Data(0x00,0x32,3);
1290   2                   lcd_fangda_dis_text(146,153+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);    
C51 COMPILER V9.00   LCDDRIVER                                                             06/23/2017 13:33:25 PAGE 22  

1291   2                   Get_GT23_Data(0x00,0x30,3);
1292   2                   lcd_fangda_dis_text(163,153+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
1293   2                       Get_GT23_Data(0x00,year2,3);
1294   2                       lcd_fangda_dis_text(180,153+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);        
1295   2                   Get_GT23_Data(0x00,year1,3);
1296   2                   lcd_fangda_dis_text(197,153+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
1297   2                   Get_GT23_Data(0x00,0x2F,3);
1298   2                   lcd_fangda_dis_text(214,151+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);// "/"
1299   2                   Get_GT23_Data(0x00,month2,3);
1300   2                   lcd_fangda_dis_text(231,153+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);    
1301   2                   Get_GT23_Data(0x00,month1,3);
1302   2                   lcd_fangda_dis_text(248,153+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);    
1303   2                   Get_GT23_Data(0x00,0x2F,3);
1304   2                   lcd_fangda_dis_text(265,151+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);// "/"
1305   2                       Get_GT23_Data(0x00,day2,3);
1306   2                   lcd_fangda_dis_text(282,153+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);    
1307   2                   Get_GT23_Data(0x00,day1,3);
1308   2                   lcd_fangda_dis_text(299,153+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);    
1309   2                   Get_GT23_Data(0x00,hour2,3);
1310   2                   lcd_fangda_dis_text(356,153+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);    
1311   2                   Get_GT23_Data(0x00,hour1,3);
1312   2                   lcd_fangda_dis_text(373,153+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
1313   2                   Get_GT23_Data(0x00,0x3A,3);
1314   2                   lcd_fangda_dis_text(395,148+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);//":"
1315   2                   Get_GT23_Data(0x00,minute2,3);
1316   2                   lcd_fangda_dis_text(407,153+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);    
1317   2                   Get_GT23_Data(0x00,minute1,3);
1318   2                   lcd_fangda_dis_text(424,153+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);    
1319   2                 //第四行护士编号
1320   2                 //  Lcd_Fill(63,193+272,40,32,bcolor);
1321   2                 //  Lcd_Fill(146,190+272,305,32,bcolor);
1322   2                   nursenumber=FmReadByte(Serch_Room_ADDR+0x4000);
1323   2                   nursenumber=nursenumber&0x7F;
1324   2                   nursenumber=nursenumber%100;
1325   2                   nursenumber1=nursenumber%10+0x30;//个位
1326   2                   nursenumber2=nursenumber/10+0x30;//十位
1327   2                   Get_GT23_Data(0x00,nursenumber2,3);
1328   2                   lcd_fangda_dis_text(63,193+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);     
1329   2                   Get_GT23_Data(0x00,nursenumber1,3);
1330   2                   lcd_fangda_dis_text(83,193+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
1331   2                 //第四行查房时间
1332   2                    minute=FmReadByte(Serch_Room_TIME_ADDR+0x4000);
1333   2                        hour=FmReadByte(Serch_Room_TIME_ADDR+0x4001);
1334   2                        day=FmReadByte(Serch_Room_TIME_ADDR+0x4002);
1335   2                        month=FmReadByte(Serch_Room_TIME_ADDR+0x4003);
1336   2                        year=FmReadByte(Serch_Room_TIME_ADDR+0x4004);
1337   2                        hour1=hour%10+0x30;//个位
1338   2                        hour2=hour/10+0x30;//十位
1339   2                        minute1=minute%10+0x30;//个位
1340   2                        minute2=minute/10+0x30;//十位
1341   2                        day1=day%10+0x30;//个位
1342   2                        day2=day/10+0x30;//十位
1343   2                        month1=month%10+0x30;//个位
1344   2                        month2=month/10+0x30;//十位
1345   2                        year1=year%10+0x30;//个位
1346   2                        year2=year/10+0x30;//十位
1347   2                    Get_GT23_Data(0x00,0x32,3);
1348   2                    lcd_fangda_dis_text(146,193+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
1349   2                    Get_GT23_Data(0x00,0x30,3);
1350   2                    lcd_fangda_dis_text(163,193+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
1351   2                        Get_GT23_Data(0x00,year2,3);
1352   2                        lcd_fangda_dis_text(180,193+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);       
C51 COMPILER V9.00   LCDDRIVER                                                             06/23/2017 13:33:25 PAGE 23  

1353   2                    Get_GT23_Data(0x00,year1,3);
1354   2                    lcd_fangda_dis_text(197,193+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
1355   2                    Get_GT23_Data(0x00,0x2F,3);
1356   2                    lcd_fangda_dis_text(214,191+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);// "/"
1357   2                    Get_GT23_Data(0x00,month2,3);
1358   2                    lcd_fangda_dis_text(231,193+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
1359   2                    Get_GT23_Data(0x00,month1,3);
1360   2                    lcd_fangda_dis_text(248,193+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
1361   2                    Get_GT23_Data(0x00,0x2F,3);
1362   2                    lcd_fangda_dis_text(265,191+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);// "/"
1363   2                        Get_GT23_Data(0x00,day2,3);
1364   2                    lcd_fangda_dis_text(282,193+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
1365   2                    Get_GT23_Data(0x00,day1,3);
1366   2                    lcd_fangda_dis_text(299,193+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
1367   2                    Get_GT23_Data(0x00,hour2,3);
1368   2                    lcd_fangda_dis_text(356,193+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
1369   2                    Get_GT23_Data(0x00,hour1,3);
1370   2                    lcd_fangda_dis_text(373,193+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
1371   2                    Get_GT23_Data(0x00,0x3A,3);
1372   2                    lcd_fangda_dis_text(395,188+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);//":"
1373   2                    Get_GT23_Data(0x00,minute2,3);
1374   2                    lcd_fangda_dis_text(407,193+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
1375   2                    Get_GT23_Data(0x00,minute1,3);
1376   2                    lcd_fangda_dis_text(424,193+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
1377   2                    //第五行护士编号
1378   2                       // Lcd_Fill(63,233+272,40,32,bcolor);
1379   2                  //  Lcd_Fill(146,230+272,305,32,bcolor);
1380   2                    nursenumber=FmReadByte(Serch_Room_ADDR+0x5000);
1381   2                    nursenumber=nursenumber&0x7F;
1382   2                    nursenumber=nursenumber%100;
1383   2                    nursenumber1=nursenumber%10+0x30;//个位
1384   2                    nursenumber2=nursenumber/10+0x30;//十位
1385   2                    Get_GT23_Data(0x00,nursenumber2,3);
1386   2                    lcd_fangda_dis_text(63,232+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);    
1387   2                    Get_GT23_Data(0x00,nursenumber1,3);
1388   2                    lcd_fangda_dis_text(83,232+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
1389   2                    //第五行查房时间
1390   2                    minute=FmReadByte(Serch_Room_TIME_ADDR+0x5000);
1391   2                        hour=FmReadByte(Serch_Room_TIME_ADDR+0x5001);
1392   2                        day=FmReadByte(Serch_Room_TIME_ADDR+0x5002);
1393   2                        month=FmReadByte(Serch_Room_TIME_ADDR+0x5003);
1394   2                        year=FmReadByte(Serch_Room_TIME_ADDR+0x5004);
1395   2                        hour1=hour%10+0x30;//个位
1396   2                        hour2=hour/10+0x30;//十位
1397   2                        minute1=minute%10+0x30;//个位
1398   2                        minute2=minute/10+0x30;//十位
1399   2                        day1=day%10+0x30;//个位
1400   2                        day2=day/10+0x30;//十位
1401   2                        month1=month%10+0x30;//个位
1402   2                        month2=month/10+0x30;//十位
1403   2                        year1=year%10+0x30;//个位
1404   2                        year2=year/10+0x30;//十位
1405   2                    Get_GT23_Data(0x00,0x32,3);
1406   2                    lcd_fangda_dis_text(146,232+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
1407   2                    Get_GT23_Data(0x00,0x30,3);
1408   2                    lcd_fangda_dis_text(163,232+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
1409   2                    Get_GT23_Data(0x00,year2,3);
1410   2                    lcd_fangda_dis_text(180,232+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
1411   2                    Get_GT23_Data(0x00,year1,3);
1412   2                    lcd_fangda_dis_text(197,232+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
1413   2                    Get_GT23_Data(0x00,0x2F,3);
1414   2                    lcd_fangda_dis_text(214,230+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);// "/"
C51 COMPILER V9.00   LCDDRIVER                                                             06/23/2017 13:33:25 PAGE 24  

1415   2                    Get_GT23_Data(0x00,month2,3);
1416   2                    lcd_fangda_dis_text(231,232+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
1417   2                    Get_GT23_Data(0x00,month1,3);
1418   2                    lcd_fangda_dis_text(248,232+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
1419   2                    Get_GT23_Data(0x00,0x2F,3);
1420   2                    lcd_fangda_dis_text(265,230+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);// "/"
1421   2                    Get_GT23_Data(0x00,day2,3);
1422   2                    lcd_fangda_dis_text(282,232+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
1423   2                    Get_GT23_Data(0x00,day1,3);
1424   2                    lcd_fangda_dis_text(299,232+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
1425   2                    Get_GT23_Data(0x00,hour2,3);
1426   2                    lcd_fangda_dis_text(356,232+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
1427   2                    Get_GT23_Data(0x00,hour1,3);
1428   2                    lcd_fangda_dis_text(373,232+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
1429   2                    Get_GT23_Data(0x00,0x3A,3);
1430   2                    lcd_fangda_dis_text(395,228+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);//":"
1431   2                    Get_GT23_Data(0x00,minute2,3);
1432   2                    lcd_fangda_dis_text(407,232+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
1433   2                    Get_GT23_Data(0x00,minute1,3);
1434   2                    lcd_fangda_dis_text(424,232+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
1435   2              }
1436   1        Set_VisualPage(1);
1437   1      }
1438          /**********************************************************
1439          *函数名称                       :ShowSerchRommPage2     
1440          *函数描述               :显示查房界面2数据
1441          *输入参数               :                                
1442          *返回值                         :       
1443          *全局变量                       :
1444          *调用模块                       :
1445          ***********************************************************
1446          *创建人                 :熊坚强
1447          *创建日期                       :2011-11-09
1448          ***********************************************************
1449          *修改人                         :
1450          *修改日期               :
1451          *注释                   : 查房信息存储在第2屏
1452          **********************************************************/ 
1453          void ShowSerchRommPage2(void)
1454          {
1455   1          uint16 xdata fcolor,bcolor;
1456   1          uint8  xdata serchroomcount=0;
1457   1              uint8  xdata nursenumber=0,nursenumber1,nursenumber2;
1458   1              uint8  xdata minute=0,minute1,minute2;
1459   1              uint8  xdata hour=0,hour1,hour2;        
1460   1              uint8  xdata day=0,day1,day2;
1461   1              uint8  xdata month=0,month1,month2;
1462   1              uint8  xdata year=0,year1,year2;
1463   1              fcolor=WHITE;//字体颜色
1464   1              bcolor=BLUE; //字体背景色,也是清屏色
1465   1              if(bIndication)
1466   1              {       
1467   2                      return;   //有呼叫信息存在,退出
1468   2              }
1469   1              ShowSerchRoomCom(2);
1470   1              serchroomcount=SerchRoom;       //读取护士查房次数
1471   1              if(Page_Flag==0)         //第0页的查房记录显示，即开始的5条查房记录
1472   1                {
1473   2                  if(serchroomcount>5)
1474   2                  {
1475   3                        //显示第一行护士号及查房时间
1476   3                    nursenumber=FmReadByte(Serch_Room_ADDR+0x6000);
C51 COMPILER V9.00   LCDDRIVER                                                             06/23/2017 13:33:25 PAGE 25  

1477   3                        nursenumber=nursenumber&0x7F;
1478   3                        nursenumber=nursenumber%100;
1479   3                        nursenumber1=nursenumber%10+0x30;//个位
1480   3                        nursenumber2=nursenumber/10+0x30;//十位
1481   3                    //第一行护士编号
1482   3                    Get_GT23_Data(0x00,nursenumber2,3);
1483   3                    lcd_fangda_dis_text(63,73+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);     
1484   3                    Get_GT23_Data(0x00,nursenumber1,3);
1485   3                    lcd_fangda_dis_text(83,73+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
1486   3                //第一行查房时间
1487   3                        minute=FmReadByte(Serch_Room_TIME_ADDR+0x6000);
1488   3                        hour=FmReadByte(Serch_Room_TIME_ADDR+0x6001);
1489   3                        day=FmReadByte(Serch_Room_TIME_ADDR+0x6002);
1490   3                        month=FmReadByte(Serch_Room_TIME_ADDR+0x6003);
1491   3                        year=FmReadByte(Serch_Room_TIME_ADDR+0x6004);
1492   3                        hour1=hour%10+0x30;//个位
1493   3                        hour2=hour/10+0x30;//十位
1494   3                        minute1=minute%10+0x30;//个位
1495   3                        minute2=minute/10+0x30;//十位
1496   3                        day1=day%10+0x30;//个位
1497   3                        day2=day/10+0x30;//十位
1498   3                        month1=month%10+0x30;//个位
1499   3                        month2=month/10+0x30;//十位
1500   3                        year1=year%10+0x30;//个位
1501   3                        year2=year/10+0x30;//十位
1502   3                       //----------------------------------------------------------------------
1503   3                       //----------------------------------------------------------------------
1504   3                        Get_GT23_Data(0x00,0x32,3);
1505   3                    lcd_fangda_dis_text(146,73+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);    
1506   3                    Get_GT23_Data(0x00,0x30,3);
1507   3                    lcd_fangda_dis_text(163,73+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
1508   3                        Get_GT23_Data(0x00,year2,3);
1509   3                        lcd_fangda_dis_text(180,73+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);        
1510   3                    Get_GT23_Data(0x00,year1,3);
1511   3                    lcd_fangda_dis_text(197,73+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
1512   3                    Get_GT23_Data(0x00,0x2F,3);
1513   3                    lcd_fangda_dis_text(214,71+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);// "/"
1514   3                    Get_GT23_Data(0x00,month2,3);
1515   3                    lcd_fangda_dis_text(231,73+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);    
1516   3                    Get_GT23_Data(0x00,month1,3);
1517   3                    lcd_fangda_dis_text(248,73+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);    
1518   3                    Get_GT23_Data(0x00,0x2F,3);
1519   3                    lcd_fangda_dis_text(265,71+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);// "/"
1520   3                        Get_GT23_Data(0x00,day2,3);
1521   3                    lcd_fangda_dis_text(282,73+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);    
1522   3                    Get_GT23_Data(0x00,day1,3);
1523   3                    lcd_fangda_dis_text(299,73+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);    
1524   3                    Get_GT23_Data(0x00,hour2,3);
1525   3                    lcd_fangda_dis_text(356,73+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);    
1526   3                    Get_GT23_Data(0x00,hour1,3);
1527   3                    lcd_fangda_dis_text(373,73+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
1528   3                    Get_GT23_Data(0x00,0x3A,3);
1529   3                    lcd_fangda_dis_text(395,68+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);//":"
1530   3                    Get_GT23_Data(0x00,minute2,3);
1531   3                    lcd_fangda_dis_text(407,73+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);    
1532   3                    Get_GT23_Data(0x00,minute1,3);
1533   3                    lcd_fangda_dis_text(424,73+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);    
1534   3                      }
1535   2                       //---------------------------------------------------------------------
1536   2                  //第二行护士编号
1537   2                      if(serchroomcount>6)
1538   2                      {
C51 COMPILER V9.00   LCDDRIVER                                                             06/23/2017 13:33:25 PAGE 26  

1539   3                    nursenumber=FmReadByte(Serch_Room_ADDR+0x7000);
1540   3                        nursenumber=nursenumber&0x7F;
1541   3                        nursenumber=nursenumber%100;
1542   3                        nursenumber1=nursenumber%10+0x30;//个位
1543   3                        nursenumber2=nursenumber/10+0x30;//十位
1544   3                    Get_GT23_Data(0x00,nursenumber2,3);
1545   3                    lcd_fangda_dis_text(63,113+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);    
1546   3                    Get_GT23_Data(0x00,nursenumber1,3);
1547   3                    lcd_fangda_dis_text(83,113+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
1548   3                    //第二行查房时间
1549   3                        minute=FmReadByte(Serch_Room_TIME_ADDR+0x7000);
1550   3                        hour=FmReadByte(Serch_Room_TIME_ADDR+0x7001);
1551   3                        day=FmReadByte(Serch_Room_TIME_ADDR+0x7002);
1552   3                        month=FmReadByte(Serch_Room_TIME_ADDR+0x7003);
1553   3                        year=FmReadByte(Serch_Room_TIME_ADDR+0x7004);
1554   3                        hour1=hour%10+0x30;//个位
1555   3                        hour2=hour/10+0x30;//十位
1556   3                        minute1=minute%10+0x30;//个位
1557   3                        minute2=minute/10+0x30;//十位
1558   3                        day1=day%10+0x30;//个位
1559   3                        day2=day/10+0x30;//十位
1560   3                        month1=month%10+0x30;//个位
1561   3                        month2=month/10+0x30;//十位
1562   3                        year1=year%10+0x30;//个位
1563   3                        year2=year/10+0x30;//十位
1564   3                      //------------------------------------------------------------------------
1565   3                      //------------------------------------------------------------------------
1566   3                    Get_GT23_Data(0x00,0x32,3);
1567   3                    lcd_fangda_dis_text(146,113+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
1568   3                    Get_GT23_Data(0x00,0x30,3);
1569   3                    lcd_fangda_dis_text(163,113+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
1570   3                        Get_GT23_Data(0x00,year2,3);
1571   3                        lcd_fangda_dis_text(180,113+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);       
1572   3                    Get_GT23_Data(0x00,year1,3);
1573   3                    lcd_fangda_dis_text(197,113+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
1574   3                    Get_GT23_Data(0x00,0x2F,3);
1575   3                    lcd_fangda_dis_text(214,111+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);// "/"
1576   3                    Get_GT23_Data(0x00,month2,3);
1577   3                    lcd_fangda_dis_text(231,113+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
1578   3                    Get_GT23_Data(0x00,month1,3);
1579   3                    lcd_fangda_dis_text(248,113+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
1580   3                    Get_GT23_Data(0x00,0x2F,3);
1581   3                    lcd_fangda_dis_text(265,111+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);// "/"
1582   3                        Get_GT23_Data(0x00,day2,3);
1583   3                    lcd_fangda_dis_text(282,113+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
1584   3                    Get_GT23_Data(0x00,day1,3);
1585   3                    lcd_fangda_dis_text(299,113+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
1586   3                    Get_GT23_Data(0x00,hour2,3);
1587   3                    lcd_fangda_dis_text(356,113+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
1588   3                    Get_GT23_Data(0x00,hour1,3);
1589   3                    lcd_fangda_dis_text(373,113+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
1590   3                    Get_GT23_Data(0x00,0x3A,3);
1591   3                    lcd_fangda_dis_text(395,108+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);//":"
1592   3                    Get_GT23_Data(0x00,minute2,3);
1593   3                    lcd_fangda_dis_text(407,113+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
1594   3                    Get_GT23_Data(0x00,minute1,3);
1595   3                    lcd_fangda_dis_text(424,113+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
1596   3                      }       
1597   2                      //-------------------------------------------------------------------------
1598   2                      //-------------------------------------------------------------------------
1599   2              //第三行护士编号
1600   2                      if(serchroomcount>7)
C51 COMPILER V9.00   LCDDRIVER                                                             06/23/2017 13:33:25 PAGE 27  

1601   2                      {
1602   3                    nursenumber=FmReadByte(Serch_Room_ADDR+0x8000);
1603   3                    nursenumber=nursenumber&0x7F;
1604   3                    nursenumber=nursenumber%100;
1605   3                    nursenumber1=nursenumber%10+0x30;//个位
1606   3                    nursenumber2=nursenumber/10+0x30;//十位
1607   3                    Get_GT23_Data(0x00,nursenumber2,3);
1608   3                    lcd_fangda_dis_text(63,153+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);    
1609   3                    Get_GT23_Data(0x00,nursenumber1,3);
1610   3                    lcd_fangda_dis_text(83,153+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
1611   3                    //第三行查房时间
1612   3                    minute=FmReadByte(Serch_Room_TIME_ADDR+0x8000);
1613   3                        hour=FmReadByte(Serch_Room_TIME_ADDR+0x8001);
1614   3                        day=FmReadByte(Serch_Room_TIME_ADDR+0x8002);
1615   3                        month=FmReadByte(Serch_Room_TIME_ADDR+0x8003);
1616   3                        year=FmReadByte(Serch_Room_TIME_ADDR+0x8004);
1617   3                        hour1=hour%10+0x30;//个位
1618   3                        hour2=hour/10+0x30;//十位
1619   3                        minute1=minute%10+0x30;//个位
1620   3                        minute2=minute/10+0x30;//十位
1621   3                        day1=day%10+0x30;//个位
1622   3                        day2=day/10+0x30;//十位
1623   3                        month1=month%10+0x30;//个位
1624   3                        month2=month/10+0x30;//十位
1625   3                        year1=year%10+0x30;//个位
1626   3                        year2=year/10+0x30;//十位
1627   3                    Get_GT23_Data(0x00,0x32,3);
1628   3                    lcd_fangda_dis_text(146,153+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
1629   3                    Get_GT23_Data(0x00,0x30,3);
1630   3                    lcd_fangda_dis_text(163,153+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
1631   3                        Get_GT23_Data(0x00,year2,3);
1632   3                        lcd_fangda_dis_text(180,153+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);       
1633   3                    Get_GT23_Data(0x00,year1,3);
1634   3                    lcd_fangda_dis_text(197,153+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
1635   3                    Get_GT23_Data(0x00,0x2F,3);
1636   3                    lcd_fangda_dis_text(214,151+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);// "/"
1637   3                    Get_GT23_Data(0x00,month2,3);
1638   3                    lcd_fangda_dis_text(231,153+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
1639   3                    Get_GT23_Data(0x00,month1,3);
1640   3                    lcd_fangda_dis_text(248,153+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
1641   3                    Get_GT23_Data(0x00,0x2F,3);
1642   3                    lcd_fangda_dis_text(265,151+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);// "/"
1643   3                        Get_GT23_Data(0x00,day2,3);
1644   3                    lcd_fangda_dis_text(282,153+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
1645   3                    Get_GT23_Data(0x00,day1,3);
1646   3                    lcd_fangda_dis_text(299,153+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
1647   3                    Get_GT23_Data(0x00,hour2,3);
1648   3                    lcd_fangda_dis_text(356,153+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
1649   3                    Get_GT23_Data(0x00,hour1,3);
1650   3                    lcd_fangda_dis_text(373,153+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
1651   3                    Get_GT23_Data(0x00,0x3A,3);
1652   3                    lcd_fangda_dis_text(395,148+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);//":"
1653   3                    Get_GT23_Data(0x00,minute2,3);
1654   3                    lcd_fangda_dis_text(407,153+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
1655   3                    Get_GT23_Data(0x00,minute1,3);
1656   3                    lcd_fangda_dis_text(424,153+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
1657   3                      }       
1658   2                  //第四行护士编号
1659   2                  if(serchroomcount>8)
1660   2                  {
1661   3                    nursenumber=FmReadByte(Serch_Room_ADDR+0x9000);
1662   3                    nursenumber=nursenumber&0x7F;
C51 COMPILER V9.00   LCDDRIVER                                                             06/23/2017 13:33:25 PAGE 28  

1663   3                    nursenumber=nursenumber%100;
1664   3                    nursenumber1=nursenumber%10+0x30;//个位
1665   3                    nursenumber2=nursenumber/10+0x30;//十位
1666   3                    Get_GT23_Data(0x00,nursenumber2,3);
1667   3                    lcd_fangda_dis_text(63,193+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);    
1668   3                    Get_GT23_Data(0x00,nursenumber1,3);
1669   3                    lcd_fangda_dis_text(83,193+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
1670   3                    //第四行查房时间
1671   3                    minute=FmReadByte(Serch_Room_TIME_ADDR+0x9000);
1672   3                        hour=FmReadByte(Serch_Room_TIME_ADDR+0x9001);
1673   3                        day=FmReadByte(Serch_Room_TIME_ADDR+0x9002);
1674   3                        month=FmReadByte(Serch_Room_TIME_ADDR+0x9003);
1675   3                        year=FmReadByte(Serch_Room_TIME_ADDR+0x9004);
1676   3                        hour1=hour%10+0x30;//个位
1677   3                        hour2=hour/10+0x30;//十位
1678   3                        minute1=minute%10+0x30;//个位
1679   3                        minute2=minute/10+0x30;//十位
1680   3                        day1=day%10+0x30;//个位
1681   3                        day2=day/10+0x30;//十位
1682   3                        month1=month%10+0x30;//个位
1683   3                        month2=month/10+0x30;//十位
1684   3                        year1=year%10+0x30;//个位
1685   3                        year2=year/10+0x30;//十位
1686   3                    Get_GT23_Data(0x00,0x32,3);
1687   3                    lcd_fangda_dis_text(146,193+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
1688   3                    Get_GT23_Data(0x00,0x30,3);
1689   3                    lcd_fangda_dis_text(163,193+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
1690   3                        Get_GT23_Data(0x00,year2,3);
1691   3                        lcd_fangda_dis_text(180,193+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);       
1692   3                    Get_GT23_Data(0x00,year1,3);
1693   3                    lcd_fangda_dis_text(197,193+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
1694   3                    Get_GT23_Data(0x00,0x2F,3);
1695   3                    lcd_fangda_dis_text(214,191+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);// "/"
1696   3                    Get_GT23_Data(0x00,month2,3);
1697   3                    lcd_fangda_dis_text(231,193+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
1698   3                    Get_GT23_Data(0x00,month1,3);
1699   3                    lcd_fangda_dis_text(248,193+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
1700   3                    Get_GT23_Data(0x00,0x2F,3);
1701   3                    lcd_fangda_dis_text(265,191+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);// "/"
1702   3                        Get_GT23_Data(0x00,day2,3);
1703   3                    lcd_fangda_dis_text(282,193+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
1704   3                    Get_GT23_Data(0x00,day1,3);
1705   3                    lcd_fangda_dis_text(299,193+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
1706   3                    Get_GT23_Data(0x00,hour2,3);
1707   3                    lcd_fangda_dis_text(356,193+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
1708   3                    Get_GT23_Data(0x00,hour1,3);
1709   3                    lcd_fangda_dis_text(373,193+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
1710   3                    Get_GT23_Data(0x00,0x3A,3);
1711   3                    lcd_fangda_dis_text(395,188+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);//":"
1712   3                    Get_GT23_Data(0x00,minute2,3);
1713   3                    lcd_fangda_dis_text(407,193+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
1714   3                    Get_GT23_Data(0x00,minute1,3);
1715   3                    lcd_fangda_dis_text(424,193+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
1716   3                      }
1717   2                      if(serchroomcount>9)
1718   2                      {
1719   3                   //第五行护士编号
1720   3                    nursenumber=FmReadByte(Serch_Room_ADDR+0xA000);
1721   3                    nursenumber=nursenumber&0x7F;
1722   3                    nursenumber=nursenumber%100;
1723   3                    nursenumber1=nursenumber%10+0x30;//个位
1724   3                    nursenumber2=nursenumber/10+0x30;//十位
C51 COMPILER V9.00   LCDDRIVER                                                             06/23/2017 13:33:25 PAGE 29  

1725   3                    Get_GT23_Data(0x00,nursenumber2,3);
1726   3                    lcd_fangda_dis_text(63,232+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);    
1727   3                    Get_GT23_Data(0x00,nursenumber1,3);
1728   3                    lcd_fangda_dis_text(83,232+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
1729   3                    //第五行查房时间
1730   3                    minute=FmReadByte(Serch_Room_TIME_ADDR+0xA000);
1731   3                        hour=FmReadByte(Serch_Room_TIME_ADDR+0xA001);
1732   3                        day=FmReadByte(Serch_Room_TIME_ADDR+0xA002);
1733   3                        month=FmReadByte(Serch_Room_TIME_ADDR+0xA003);
1734   3                        year=FmReadByte(Serch_Room_TIME_ADDR+0xA004);
1735   3                        hour1=hour%10+0x30;//个位
1736   3                        hour2=hour/10+0x30;//十位
1737   3                        minute1=minute%10+0x30;//个位
1738   3                        minute2=minute/10+0x30;//十位
1739   3                        day1=day%10+0x30;//个位
1740   3                        day2=day/10+0x30;//十位
1741   3                        month1=month%10+0x30;//个位
1742   3                        month2=month/10+0x30;//十位
1743   3                        year1=year%10+0x30;//个位
1744   3                        year2=year/10+0x30;//十位
1745   3                    Get_GT23_Data(0x00,0x32,3);
1746   3                    lcd_fangda_dis_text(146,232+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
1747   3                    Get_GT23_Data(0x00,0x30,3);
1748   3                    lcd_fangda_dis_text(163,232+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
1749   3                    Get_GT23_Data(0x00,year2,3);
1750   3                    lcd_fangda_dis_text(180,232+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
1751   3                    Get_GT23_Data(0x00,year1,3);
1752   3                    lcd_fangda_dis_text(197,232+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
1753   3                    Get_GT23_Data(0x00,0x2F,3);
1754   3                    lcd_fangda_dis_text(214,230+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);// "/"
1755   3                    Get_GT23_Data(0x00,month2,3);
1756   3                    lcd_fangda_dis_text(231,232+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
1757   3                    Get_GT23_Data(0x00,month1,3);
1758   3                    lcd_fangda_dis_text(248,232+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
1759   3                    Get_GT23_Data(0x00,0x2F,3);
1760   3                    lcd_fangda_dis_text(265,230+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);// "/"
1761   3                    Get_GT23_Data(0x00,day2,3);
1762   3                    lcd_fangda_dis_text(282,232+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
1763   3                    Get_GT23_Data(0x00,day1,3);
1764   3                    lcd_fangda_dis_text(299,232+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
1765   3                    Get_GT23_Data(0x00,hour2,3);
1766   3                    lcd_fangda_dis_text(356,232+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
1767   3                    Get_GT23_Data(0x00,hour1,3);
1768   3                    lcd_fangda_dis_text(373,232+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
1769   3                    Get_GT23_Data(0x00,0x3A,3);
1770   3                    lcd_fangda_dis_text(395,228+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);//":"
1771   3                    Get_GT23_Data(0x00,minute2,3);
1772   3                    lcd_fangda_dis_text(407,232+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
1773   3                    Get_GT23_Data(0x00,minute1,3);
1774   3                    lcd_fangda_dis_text(424,232+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
1775   3                      }
1776   2              }
1777   1        else
1778   1        {              //显示第一行护士号及查房时间
1779   2                   nursenumber=FmReadByte(Serch_Room_ADDR+0x6000);
1780   2                       nursenumber=nursenumber&0x7F;
1781   2                       nursenumber=nursenumber%100;
1782   2                       nursenumber1=nursenumber%10+0x30;//个位
1783   2                       nursenumber2=nursenumber/10+0x30;//十位
1784   2                   //第一行护士编号
1785   2                   Get_GT23_Data(0x00,nursenumber2,3);
1786   2                   lcd_fangda_dis_text(63,73+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);      
C51 COMPILER V9.00   LCDDRIVER                                                             06/23/2017 13:33:25 PAGE 30  

1787   2                   Get_GT23_Data(0x00,nursenumber1,3);
1788   2                   lcd_fangda_dis_text(83,73+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
1789   2               //第一行查房时间
1790   2                       minute=FmReadByte(Serch_Room_TIME_ADDR+0x6000);
1791   2                       hour=FmReadByte(Serch_Room_TIME_ADDR+0x6001);
1792   2                       day=FmReadByte(Serch_Room_TIME_ADDR+0x6002);
1793   2                       month=FmReadByte(Serch_Room_TIME_ADDR+0x6003);
1794   2                       year=FmReadByte(Serch_Room_TIME_ADDR+0x6004);
1795   2                       hour1=hour%10+0x30;//个位
1796   2                       hour2=hour/10+0x30;//十位
1797   2                       minute1=minute%10+0x30;//个位
1798   2                       minute2=minute/10+0x30;//十位
1799   2                       day1=day%10+0x30;//个位
1800   2                       day2=day/10+0x30;//十位
1801   2                       month1=month%10+0x30;//个位
1802   2                       month2=month/10+0x30;//十位
1803   2                       year1=year%10+0x30;//个位
1804   2                       year2=year/10+0x30;//十位
1805   2                       //----------------------------------------------------------------------
1806   2                       //----------------------------------------------------------------------
1807   2                       Get_GT23_Data(0x00,0x32,3);
1808   2                   lcd_fangda_dis_text(146,73+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);     
1809   2                   Get_GT23_Data(0x00,0x30,3);
1810   2                   lcd_fangda_dis_text(163,73+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
1811   2                       Get_GT23_Data(0x00,year2,3);
1812   2                       lcd_fangda_dis_text(180,73+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data); 
1813   2                   Get_GT23_Data(0x00,year1,3);
1814   2                   lcd_fangda_dis_text(197,73+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
1815   2                   Get_GT23_Data(0x00,0x2F,3);
1816   2                   lcd_fangda_dis_text(214,71+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);// "/"
1817   2                   Get_GT23_Data(0x00,month2,3);
1818   2                   lcd_fangda_dis_text(231,73+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);     
1819   2                   Get_GT23_Data(0x00,month1,3);
1820   2                   lcd_fangda_dis_text(248,73+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);     
1821   2                   Get_GT23_Data(0x00,0x2F,3);
1822   2                   lcd_fangda_dis_text(265,71+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);// "/"
1823   2                       Get_GT23_Data(0x00,day2,3);
1824   2                   lcd_fangda_dis_text(282,73+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);     
1825   2                   Get_GT23_Data(0x00,day1,3);
1826   2                   lcd_fangda_dis_text(299,73+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);     
1827   2                   Get_GT23_Data(0x00,hour2,3);
1828   2                   lcd_fangda_dis_text(356,73+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);     
1829   2                   Get_GT23_Data(0x00,hour1,3);
1830   2                   lcd_fangda_dis_text(373,73+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
1831   2                   Get_GT23_Data(0x00,0x3A,3);
1832   2                   lcd_fangda_dis_text(395,68+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);//":"
1833   2                   Get_GT23_Data(0x00,minute2,3);
1834   2                   lcd_fangda_dis_text(407,73+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);     
1835   2                   Get_GT23_Data(0x00,minute1,3);
1836   2                   lcd_fangda_dis_text(424,73+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);     
1837   2                       //---------------------------------------------------------------------
1838   2                  //第二行护士编号
1839   2                   nursenumber=FmReadByte(Serch_Room_ADDR+0x7000);
1840   2                       nursenumber=nursenumber&0x7F;
1841   2                       nursenumber=nursenumber%100;
1842   2                       nursenumber1=nursenumber%10+0x30;//个位
1843   2                       nursenumber2=nursenumber/10+0x30;//十位
1844   2                   Get_GT23_Data(0x00,nursenumber2,3);
1845   2                   lcd_fangda_dis_text(63,113+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);     
1846   2                   Get_GT23_Data(0x00,nursenumber1,3);
1847   2                   lcd_fangda_dis_text(83,113+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
1848   2                  //第二行查房时间
C51 COMPILER V9.00   LCDDRIVER                                                             06/23/2017 13:33:25 PAGE 31  

1849   2                       minute=FmReadByte(Serch_Room_TIME_ADDR+0x7000);
1850   2                       hour=FmReadByte(Serch_Room_TIME_ADDR+0x7001);
1851   2                       day=FmReadByte(Serch_Room_TIME_ADDR+0x7002);
1852   2                       month=FmReadByte(Serch_Room_TIME_ADDR+0x7003);
1853   2                       year=FmReadByte(Serch_Room_TIME_ADDR+0x7004);
1854   2                       hour1=hour%10+0x30;//个位
1855   2                       hour2=hour/10+0x30;//十位
1856   2                       minute1=minute%10+0x30;//个位
1857   2                       minute2=minute/10+0x30;//十位
1858   2                       day1=day%10+0x30;//个位
1859   2                       day2=day/10+0x30;//十位
1860   2                       month1=month%10+0x30;//个位
1861   2                       month2=month/10+0x30;//十位
1862   2                       year1=year%10+0x30;//个位
1863   2                       year2=year/10+0x30;//十位
1864   2                      //------------------------------------------------------------------------
1865   2                      //------------------------------------------------------------------------
1866   2                   Get_GT23_Data(0x00,0x32,3);
1867   2                   lcd_fangda_dis_text(146,113+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);    
1868   2                   Get_GT23_Data(0x00,0x30,3);
1869   2                   lcd_fangda_dis_text(163,113+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
1870   2                       Get_GT23_Data(0x00,year2,3);
1871   2                       lcd_fangda_dis_text(180,113+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);        
1872   2                   Get_GT23_Data(0x00,year1,3);
1873   2                   lcd_fangda_dis_text(197,113+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
1874   2                   Get_GT23_Data(0x00,0x2F,3);
1875   2                   lcd_fangda_dis_text(214,111+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);// "/"
1876   2                   Get_GT23_Data(0x00,month2,3);
1877   2                   lcd_fangda_dis_text(231,113+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);    
1878   2                   Get_GT23_Data(0x00,month1,3);
1879   2                   lcd_fangda_dis_text(248,113+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);    
1880   2                   Get_GT23_Data(0x00,0x2F,3);
1881   2                   lcd_fangda_dis_text(265,111+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);// "/"
1882   2                       Get_GT23_Data(0x00,day2,3);
1883   2                   lcd_fangda_dis_text(282,113+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);    
1884   2                   Get_GT23_Data(0x00,day1,3);
1885   2                   lcd_fangda_dis_text(299,113+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);    
1886   2                   Get_GT23_Data(0x00,hour2,3);
1887   2                   lcd_fangda_dis_text(356,113+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);    
1888   2                   Get_GT23_Data(0x00,hour1,3);
1889   2                   lcd_fangda_dis_text(373,113+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
1890   2                   Get_GT23_Data(0x00,0x3A,3);
1891   2                   lcd_fangda_dis_text(395,108+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);//":"
1892   2                   Get_GT23_Data(0x00,minute2,3);
1893   2                   lcd_fangda_dis_text(407,113+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);    
1894   2                   Get_GT23_Data(0x00,minute1,3);
1895   2                   lcd_fangda_dis_text(424,113+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);    
1896   2                      //-------------------------------------------------------------------------
1897   2                      //-------------------------------------------------------------------------
1898   2              //第三行护士编号
1899   2                   nursenumber=FmReadByte(Serch_Room_ADDR+0x8000);
1900   2                   nursenumber=nursenumber&0x7F;
1901   2                   nursenumber=nursenumber%100;
1902   2                   nursenumber1=nursenumber%10+0x30;//个位
1903   2                   nursenumber2=nursenumber/10+0x30;//十位
1904   2                   Get_GT23_Data(0x00,nursenumber2,3);
1905   2                   lcd_fangda_dis_text(63,153+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);     
1906   2                   Get_GT23_Data(0x00,nursenumber1,3);
1907   2                   lcd_fangda_dis_text(83,153+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
1908   2                 //第三行查房时间
1909   2                   minute=FmReadByte(Serch_Room_TIME_ADDR+0x8000);
1910   2                       hour=FmReadByte(Serch_Room_TIME_ADDR+0x8001);
C51 COMPILER V9.00   LCDDRIVER                                                             06/23/2017 13:33:25 PAGE 32  

1911   2                       day=FmReadByte(Serch_Room_TIME_ADDR+0x8002);
1912   2                       month=FmReadByte(Serch_Room_TIME_ADDR+0x8003);
1913   2                       year=FmReadByte(Serch_Room_TIME_ADDR+0x8004);
1914   2                       hour1=hour%10+0x30;//个位
1915   2                       hour2=hour/10+0x30;//十位
1916   2                       minute1=minute%10+0x30;//个位
1917   2                       minute2=minute/10+0x30;//十位
1918   2                       day1=day%10+0x30;//个位
1919   2                       day2=day/10+0x30;//十位
1920   2                       month1=month%10+0x30;//个位
1921   2                       month2=month/10+0x30;//十位
1922   2                       year1=year%10+0x30;//个位
1923   2                       year2=year/10+0x30;//十位
1924   2                   Get_GT23_Data(0x00,0x32,3);
1925   2                   lcd_fangda_dis_text(146,153+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);    
1926   2                   Get_GT23_Data(0x00,0x30,3);
1927   2                   lcd_fangda_dis_text(163,153+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
1928   2                       Get_GT23_Data(0x00,year2,3);
1929   2                       lcd_fangda_dis_text(180,153+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);        
1930   2                   Get_GT23_Data(0x00,year1,3);
1931   2                   lcd_fangda_dis_text(197,153+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
1932   2                   Get_GT23_Data(0x00,0x2F,3);
1933   2                   lcd_fangda_dis_text(214,151+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);// "/"
1934   2                   Get_GT23_Data(0x00,month2,3);
1935   2                   lcd_fangda_dis_text(231,153+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);    
1936   2                   Get_GT23_Data(0x00,month1,3);
1937   2                   lcd_fangda_dis_text(248,153+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);    
1938   2                   Get_GT23_Data(0x00,0x2F,3);
1939   2                   lcd_fangda_dis_text(265,151+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);// "/"
1940   2                       Get_GT23_Data(0x00,day2,3);
1941   2                   lcd_fangda_dis_text(282,153+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);    
1942   2                   Get_GT23_Data(0x00,day1,3);
1943   2                   lcd_fangda_dis_text(299,153+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);    
1944   2                   Get_GT23_Data(0x00,hour2,3);
1945   2                   lcd_fangda_dis_text(356,153+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);    
1946   2                   Get_GT23_Data(0x00,hour1,3);
1947   2                   lcd_fangda_dis_text(373,153+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
1948   2                   Get_GT23_Data(0x00,0x3A,3);
1949   2                   lcd_fangda_dis_text(395,148+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);//":"
1950   2                   Get_GT23_Data(0x00,minute2,3);
1951   2                   lcd_fangda_dis_text(407,153+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);    
1952   2                   Get_GT23_Data(0x00,minute1,3);
1953   2                   lcd_fangda_dis_text(424,153+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);    
1954   2                 //第四行护士编号
1955   2                   nursenumber=FmReadByte(Serch_Room_ADDR+0x9000);
1956   2                   nursenumber=nursenumber&0x7F;
1957   2                   nursenumber=nursenumber%100;
1958   2                   nursenumber1=nursenumber%10+0x30;//个位
1959   2                   nursenumber2=nursenumber/10+0x30;//十位
1960   2                   Get_GT23_Data(0x00,nursenumber2,3);
1961   2                   lcd_fangda_dis_text(63,193+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);     
1962   2                   Get_GT23_Data(0x00,nursenumber1,3);
1963   2                   lcd_fangda_dis_text(83,193+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
1964   2                 //第四行查房时间
1965   2                    minute=FmReadByte(Serch_Room_TIME_ADDR+0x9000);
1966   2                        hour=FmReadByte(Serch_Room_TIME_ADDR+0x9001);
1967   2                        day=FmReadByte(Serch_Room_TIME_ADDR+0x9002);
1968   2                        month=FmReadByte(Serch_Room_TIME_ADDR+0x9003);
1969   2                        year=FmReadByte(Serch_Room_TIME_ADDR+0x9004);
1970   2                        hour1=hour%10+0x30;//个位
1971   2                        hour2=hour/10+0x30;//十位
1972   2                        minute1=minute%10+0x30;//个位
C51 COMPILER V9.00   LCDDRIVER                                                             06/23/2017 13:33:25 PAGE 33  

1973   2                        minute2=minute/10+0x30;//十位
1974   2                        day1=day%10+0x30;//个位
1975   2                        day2=day/10+0x30;//十位
1976   2                        month1=month%10+0x30;//个位
1977   2                        month2=month/10+0x30;//十位
1978   2                        year1=year%10+0x30;//个位
1979   2                        year2=year/10+0x30;//十位
1980   2                    Get_GT23_Data(0x00,0x32,3);
1981   2                    lcd_fangda_dis_text(146,193+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
1982   2                    Get_GT23_Data(0x00,0x30,3);
1983   2                    lcd_fangda_dis_text(163,193+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
1984   2                        Get_GT23_Data(0x00,year2,3);
1985   2                        lcd_fangda_dis_text(180,193+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);       
1986   2                    Get_GT23_Data(0x00,year1,3);
1987   2                    lcd_fangda_dis_text(197,193+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
1988   2                    Get_GT23_Data(0x00,0x2F,3);
1989   2                    lcd_fangda_dis_text(214,191+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);// "/"
1990   2                    Get_GT23_Data(0x00,month2,3);
1991   2                    lcd_fangda_dis_text(231,193+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
1992   2                    Get_GT23_Data(0x00,month1,3);
1993   2                    lcd_fangda_dis_text(248,193+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
1994   2                    Get_GT23_Data(0x00,0x2F,3);
1995   2                    lcd_fangda_dis_text(265,191+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);// "/"
1996   2                        Get_GT23_Data(0x00,day2,3);
1997   2                    lcd_fangda_dis_text(282,193+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
1998   2                    Get_GT23_Data(0x00,day1,3);
1999   2                    lcd_fangda_dis_text(299,193+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
2000   2                    Get_GT23_Data(0x00,hour2,3);
2001   2                    lcd_fangda_dis_text(356,193+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
2002   2                    Get_GT23_Data(0x00,hour1,3);
2003   2                    lcd_fangda_dis_text(373,193+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
2004   2                    Get_GT23_Data(0x00,0x3A,3);
2005   2                    lcd_fangda_dis_text(395,188+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);//":"
2006   2                    Get_GT23_Data(0x00,minute2,3);
2007   2                    lcd_fangda_dis_text(407,193+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
2008   2                    Get_GT23_Data(0x00,minute1,3);
2009   2                    lcd_fangda_dis_text(424,193+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
2010   2                   //第五行护士编号
2011   2                    nursenumber=FmReadByte(Serch_Room_ADDR+0xA000);
2012   2                    nursenumber=nursenumber&0x7F;
2013   2                    nursenumber=nursenumber%100;
2014   2                    nursenumber1=nursenumber%10+0x30;//个位
2015   2                    nursenumber2=nursenumber/10+0x30;//十位
2016   2                    Get_GT23_Data(0x00,nursenumber2,3);
2017   2                    lcd_fangda_dis_text(63,232+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);    
2018   2                    Get_GT23_Data(0x00,nursenumber1,3);
2019   2                    lcd_fangda_dis_text(83,232+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
2020   2                    //第五行查房时间
2021   2                    minute=FmReadByte(Serch_Room_TIME_ADDR+0xA000);
2022   2                        hour=FmReadByte(Serch_Room_TIME_ADDR+0xA001);
2023   2                        day=FmReadByte(Serch_Room_TIME_ADDR+0xA002);
2024   2                        month=FmReadByte(Serch_Room_TIME_ADDR+0xA003);
2025   2                        year=FmReadByte(Serch_Room_TIME_ADDR+0xA004);
2026   2                        hour1=hour%10+0x30;//个位
2027   2                        hour2=hour/10+0x30;//十位
2028   2                        minute1=minute%10+0x30;//个位
2029   2                        minute2=minute/10+0x30;//十位
2030   2                        day1=day%10+0x30;//个位
2031   2                        day2=day/10+0x30;//十位
2032   2                        month1=month%10+0x30;//个位
2033   2                        month2=month/10+0x30;//十位
2034   2                        year1=year%10+0x30;//个位
C51 COMPILER V9.00   LCDDRIVER                                                             06/23/2017 13:33:25 PAGE 34  

2035   2                        year2=year/10+0x30;//十位
2036   2                    Get_GT23_Data(0x00,0x32,3);
2037   2                    lcd_fangda_dis_text(146,232+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
2038   2                    Get_GT23_Data(0x00,0x30,3);
2039   2                    lcd_fangda_dis_text(163,232+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
2040   2                    Get_GT23_Data(0x00,year2,3);
2041   2                    lcd_fangda_dis_text(180,232+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
2042   2                    Get_GT23_Data(0x00,year1,3);
2043   2                    lcd_fangda_dis_text(197,232+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
2044   2                    Get_GT23_Data(0x00,0x2F,3);
2045   2                    lcd_fangda_dis_text(214,230+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);// "/"
2046   2                    Get_GT23_Data(0x00,month2,3);
2047   2                    lcd_fangda_dis_text(231,232+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
2048   2                    Get_GT23_Data(0x00,month1,3);
2049   2                    lcd_fangda_dis_text(248,232+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
2050   2                    Get_GT23_Data(0x00,0x2F,3);
2051   2                    lcd_fangda_dis_text(265,230+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);// "/"
2052   2                    Get_GT23_Data(0x00,day2,3);
2053   2                    lcd_fangda_dis_text(282,232+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
2054   2                    Get_GT23_Data(0x00,day1,3);
2055   2                    lcd_fangda_dis_text(299,232+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
2056   2                    Get_GT23_Data(0x00,hour2,3);
2057   2                    lcd_fangda_dis_text(356,232+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
2058   2                    Get_GT23_Data(0x00,hour1,3);
2059   2                    lcd_fangda_dis_text(373,232+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
2060   2                    Get_GT23_Data(0x00,0x3A,3);
2061   2                    lcd_fangda_dis_text(395,228+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);//":"
2062   2                    Get_GT23_Data(0x00,minute2,3);
2063   2                    lcd_fangda_dis_text(407,232+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
2064   2                    Get_GT23_Data(0x00,minute1,3);
2065   2                    lcd_fangda_dis_text(424,232+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
2066   2              }
2067   1        }
2068          /**********************************************************
2069          *函数名称                       :ShowSerchRommPage3     
2070          *函数描述               :显示查房界面3数据
2071          *输入参数               :                                
2072          *返回值                         :       
2073          *全局变量                       :
2074          *调用模块                       :
2075          ***********************************************************
2076          *创建人                 :熊坚强
2077          *创建日期                       :2011-11-09
2078          ***********************************************************
2079          *修改人                         :
2080          *修改日期               :
2081          *注释                   : 查房信息存储在第3屏
2082          **********************************************************/ 
2083          void ShowSerchRommPage3(void)
2084          {
2085   1          uint16 xdata fcolor,bcolor;
2086   1          uint8  xdata serchroomcount=0;
2087   1              uint8  xdata nursenumber=0,nursenumber1,nursenumber2;
2088   1              uint8  xdata minute=0,minute1,minute2;
2089   1              uint8  xdata hour=0,hour1,hour2;        
2090   1              uint8  xdata day=0,day1,day2;
2091   1              uint8  xdata month=0,month1,month2;
2092   1              uint8  xdata year=0,year1,year2;
2093   1              fcolor=WHITE;//字体颜色
2094   1              bcolor=BLUE; //字体背景色,也是清屏色
2095   1              if(bIndication)
2096   1              {       
C51 COMPILER V9.00   LCDDRIVER                                                             06/23/2017 13:33:25 PAGE 35  

2097   2                      return;   //有呼叫信息存在,退出
2098   2              }
2099   1              ShowSerchRoomCom(3);
2100   1              serchroomcount=SerchRoom;       //读取护士查房次数
2101   1              if(Page_Flag==0)         //第0页的查房记录显示，即开始的5条查房记录
2102   1                {
2103   2                  if(serchroomcount>10)
2104   2                  {
2105   3                        //显示第一行护士号及查房时间
2106   3                    nursenumber=FmReadByte(Serch_Room_ADDR+0xB000);
2107   3                        nursenumber=nursenumber&0x7F;
2108   3                        nursenumber=nursenumber%100;
2109   3                        nursenumber1=nursenumber%10+0x30;//个位
2110   3                        nursenumber2=nursenumber/10+0x30;//十位
2111   3                    //第一行护士编号
2112   3                    Get_GT23_Data(0x00,nursenumber2,3);
2113   3                    lcd_fangda_dis_text(63,73+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);     
2114   3                    Get_GT23_Data(0x00,nursenumber1,3);
2115   3                    lcd_fangda_dis_text(83,73+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
2116   3                //第一行查房时间
2117   3                        minute=FmReadByte(Serch_Room_TIME_ADDR+0xB000);
2118   3                        hour=FmReadByte(Serch_Room_TIME_ADDR+0xB001);
2119   3                        day=FmReadByte(Serch_Room_TIME_ADDR+0xB002);
2120   3                        month=FmReadByte(Serch_Room_TIME_ADDR+0xB003);
2121   3                        year=FmReadByte(Serch_Room_TIME_ADDR+0xB004);
2122   3                        hour1=hour%10+0x30;//个位
2123   3                        hour2=hour/10+0x30;//十位
2124   3                        minute1=minute%10+0x30;//个位
2125   3                        minute2=minute/10+0x30;//十位
2126   3                        day1=day%10+0x30;//个位
2127   3                        day2=day/10+0x30;//十位
2128   3                        month1=month%10+0x30;//个位
2129   3                        month2=month/10+0x30;//十位
2130   3                        year1=year%10+0x30;//个位
2131   3                        year2=year/10+0x30;//十位
2132   3                       //----------------------------------------------------------------------
2133   3                       //----------------------------------------------------------------------
2134   3                        Get_GT23_Data(0x00,0x32,3);
2135   3                    lcd_fangda_dis_text(146,73+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);    
2136   3                    Get_GT23_Data(0x00,0x30,3);
2137   3                    lcd_fangda_dis_text(163,73+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
2138   3                        Get_GT23_Data(0x00,year2,3);
2139   3                        lcd_fangda_dis_text(180,73+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);        
2140   3                    Get_GT23_Data(0x00,year1,3);
2141   3                    lcd_fangda_dis_text(197,73+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
2142   3                    Get_GT23_Data(0x00,0x2F,3);
2143   3                    lcd_fangda_dis_text(214,71+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);// "/"
2144   3                    Get_GT23_Data(0x00,month2,3);
2145   3                    lcd_fangda_dis_text(231,73+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);    
2146   3                    Get_GT23_Data(0x00,month1,3);
2147   3                    lcd_fangda_dis_text(248,73+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);    
2148   3                    Get_GT23_Data(0x00,0x2F,3);
2149   3                    lcd_fangda_dis_text(265,71+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);// "/"
2150   3                        Get_GT23_Data(0x00,day2,3);
2151   3                    lcd_fangda_dis_text(282,73+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);    
2152   3                    Get_GT23_Data(0x00,day1,3);
2153   3                    lcd_fangda_dis_text(299,73+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);    
2154   3                    Get_GT23_Data(0x00,hour2,3);
2155   3                    lcd_fangda_dis_text(356,73+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);    
2156   3                    Get_GT23_Data(0x00,hour1,3);
2157   3                    lcd_fangda_dis_text(373,73+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
2158   3                    Get_GT23_Data(0x00,0x3A,3);
C51 COMPILER V9.00   LCDDRIVER                                                             06/23/2017 13:33:25 PAGE 36  

2159   3                    lcd_fangda_dis_text(395,68+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);//":"
2160   3                    Get_GT23_Data(0x00,minute2,3);
2161   3                    lcd_fangda_dis_text(407,73+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);    
2162   3                    Get_GT23_Data(0x00,minute1,3);
2163   3                    lcd_fangda_dis_text(424,73+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);    
2164   3                      }
2165   2                       //---------------------------------------------------------------------
2166   2                  //第二行护士编号
2167   2                      if(serchroomcount>11)
2168   2                      {
2169   3                    nursenumber=FmReadByte(Serch_Room_ADDR+0xC000);
2170   3                        nursenumber=nursenumber&0x7F;
2171   3                        nursenumber=nursenumber%100;
2172   3                        nursenumber1=nursenumber%10+0x30;//个位
2173   3                        nursenumber2=nursenumber/10+0x30;//十位
2174   3                    Get_GT23_Data(0x00,nursenumber2,3);
2175   3                    lcd_fangda_dis_text(63,113+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);    
2176   3                    Get_GT23_Data(0x00,nursenumber1,3);
2177   3                    lcd_fangda_dis_text(83,113+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
2178   3                    //第二行查房时间
2179   3                        minute=FmReadByte(Serch_Room_TIME_ADDR+0xC000);
2180   3                        hour=FmReadByte(Serch_Room_TIME_ADDR+0xC001);
2181   3                        day=FmReadByte(Serch_Room_TIME_ADDR+0xC002);
2182   3                        month=FmReadByte(Serch_Room_TIME_ADDR+0xC003);
2183   3                        year=FmReadByte(Serch_Room_TIME_ADDR+0xC004);
2184   3                        hour1=hour%10+0x30;//个位
2185   3                        hour2=hour/10+0x30;//十位
2186   3                        minute1=minute%10+0x30;//个位
2187   3                        minute2=minute/10+0x30;//十位
2188   3                        day1=day%10+0x30;//个位
2189   3                        day2=day/10+0x30;//十位
2190   3                        month1=month%10+0x30;//个位
2191   3                        month2=month/10+0x30;//十位
2192   3                        year1=year%10+0x30;//个位
2193   3                        year2=year/10+0x30;//十位
2194   3                      //------------------------------------------------------------------------
2195   3                      //------------------------------------------------------------------------
2196   3                    Get_GT23_Data(0x00,0x32,3);
2197   3                    lcd_fangda_dis_text(146,113+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
2198   3                    Get_GT23_Data(0x00,0x30,3);
2199   3                    lcd_fangda_dis_text(163,113+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
2200   3                        Get_GT23_Data(0x00,year2,3);
2201   3                        lcd_fangda_dis_text(180,113+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);       
2202   3                    Get_GT23_Data(0x00,year1,3);
2203   3                    lcd_fangda_dis_text(197,113+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
2204   3                    Get_GT23_Data(0x00,0x2F,3);
2205   3                    lcd_fangda_dis_text(214,111+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);// "/"
2206   3                    Get_GT23_Data(0x00,month2,3);
2207   3                    lcd_fangda_dis_text(231,113+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
2208   3                    Get_GT23_Data(0x00,month1,3);
2209   3                    lcd_fangda_dis_text(248,113+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
2210   3                    Get_GT23_Data(0x00,0x2F,3);
2211   3                    lcd_fangda_dis_text(265,111+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);// "/"
2212   3                        Get_GT23_Data(0x00,day2,3);
2213   3                    lcd_fangda_dis_text(282,113+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
2214   3                    Get_GT23_Data(0x00,day1,3);
2215   3                    lcd_fangda_dis_text(299,113+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
2216   3                    Get_GT23_Data(0x00,hour2,3);
2217   3                    lcd_fangda_dis_text(356,113+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
2218   3                    Get_GT23_Data(0x00,hour1,3);
2219   3                    lcd_fangda_dis_text(373,113+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
2220   3                    Get_GT23_Data(0x00,0x3A,3);
C51 COMPILER V9.00   LCDDRIVER                                                             06/23/2017 13:33:25 PAGE 37  

2221   3                    lcd_fangda_dis_text(395,108+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);//":"
2222   3                    Get_GT23_Data(0x00,minute2,3);
2223   3                    lcd_fangda_dis_text(407,113+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
2224   3                    Get_GT23_Data(0x00,minute1,3);
2225   3                    lcd_fangda_dis_text(424,113+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
2226   3                      }       
2227   2                      //-------------------------------------------------------------------------
2228   2                      //-------------------------------------------------------------------------
2229   2              //第三行护士编号
2230   2                      if(serchroomcount>12)
2231   2                      {
2232   3                    nursenumber=FmReadByte(Serch_Room_ADDR+0x2D000);
2233   3                    nursenumber=nursenumber&0x7F;
2234   3                    nursenumber=nursenumber%100;
2235   3                    nursenumber1=nursenumber%10+0x30;//个位
2236   3                    nursenumber2=nursenumber/10+0x30;//十位
2237   3                    Get_GT23_Data(0x00,nursenumber2,3);
2238   3                    lcd_fangda_dis_text(63,153+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);    
2239   3                    Get_GT23_Data(0x00,nursenumber1,3);
2240   3                    lcd_fangda_dis_text(83,153+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
2241   3                    //第三行查房时间
2242   3                    minute=FmReadByte(Serch_Room_TIME_ADDR+0xD000);
2243   3                        hour=FmReadByte(Serch_Room_TIME_ADDR+0xD001);
2244   3                        day=FmReadByte(Serch_Room_TIME_ADDR+0xD002);
2245   3                        month=FmReadByte(Serch_Room_TIME_ADDR+0xD003);
2246   3                        year=FmReadByte(Serch_Room_TIME_ADDR+0xD004);
2247   3                        hour1=hour%10+0x30;//个位
2248   3                        hour2=hour/10+0x30;//十位
2249   3                        minute1=minute%10+0x30;//个位
2250   3                        minute2=minute/10+0x30;//十位
2251   3                        day1=day%10+0x30;//个位
2252   3                        day2=day/10+0x30;//十位
2253   3                        month1=month%10+0x30;//个位
2254   3                        month2=month/10+0x30;//十位
2255   3                        year1=year%10+0x30;//个位
2256   3                        year2=year/10+0x30;//十位
2257   3                    Get_GT23_Data(0x00,0x32,3);
2258   3                    lcd_fangda_dis_text(146,153+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
2259   3                    Get_GT23_Data(0x00,0x30,3);
2260   3                    lcd_fangda_dis_text(163,153+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
2261   3                        Get_GT23_Data(0x00,year2,3);
2262   3                        lcd_fangda_dis_text(180,153+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);       
2263   3                    Get_GT23_Data(0x00,year1,3);
2264   3                    lcd_fangda_dis_text(197,153+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
2265   3                    Get_GT23_Data(0x00,0x2F,3);
2266   3                    lcd_fangda_dis_text(214,151+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);// "/"
2267   3                    Get_GT23_Data(0x00,month2,3);
2268   3                    lcd_fangda_dis_text(231,153+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
2269   3                    Get_GT23_Data(0x00,month1,3);
2270   3                    lcd_fangda_dis_text(248,153+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
2271   3                    Get_GT23_Data(0x00,0x2F,3);
2272   3                    lcd_fangda_dis_text(265,151+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);// "/"
2273   3                        Get_GT23_Data(0x00,day2,3);
2274   3                    lcd_fangda_dis_text(282,153+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
2275   3                    Get_GT23_Data(0x00,day1,3);
2276   3                    lcd_fangda_dis_text(299,153+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
2277   3                    Get_GT23_Data(0x00,hour2,3);
2278   3                    lcd_fangda_dis_text(356,153+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
2279   3                    Get_GT23_Data(0x00,hour1,3);
2280   3                    lcd_fangda_dis_text(373,153+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
2281   3                    Get_GT23_Data(0x00,0x3A,3);
2282   3                    lcd_fangda_dis_text(395,148+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);//":"
C51 COMPILER V9.00   LCDDRIVER                                                             06/23/2017 13:33:25 PAGE 38  

2283   3                    Get_GT23_Data(0x00,minute2,3);
2284   3                    lcd_fangda_dis_text(407,153+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
2285   3                    Get_GT23_Data(0x00,minute1,3);
2286   3                    lcd_fangda_dis_text(424,153+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
2287   3                      }       
2288   2                  //第四行护士编号
2289   2                  if(serchroomcount>13)
2290   2                  {
2291   3                    nursenumber=FmReadByte(Serch_Room_ADDR+0x2E000);
2292   3                    nursenumber=nursenumber&0x7F;
2293   3                    nursenumber=nursenumber%100;
2294   3                    nursenumber1=nursenumber%10+0x30;//个位
2295   3                    nursenumber2=nursenumber/10+0x30;//十位
2296   3                    Get_GT23_Data(0x00,nursenumber2,3);
2297   3                    lcd_fangda_dis_text(63,193+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);    
2298   3                    Get_GT23_Data(0x00,nursenumber1,3);
2299   3                    lcd_fangda_dis_text(83,193+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
2300   3                    //第四行查房时间
2301   3                    minute=FmReadByte(Serch_Room_TIME_ADDR+0xE000);
2302   3                        hour=FmReadByte(Serch_Room_TIME_ADDR+0xE001);
2303   3                        day=FmReadByte(Serch_Room_TIME_ADDR+0xE002);
2304   3                        month=FmReadByte(Serch_Room_TIME_ADDR+0xE003);
2305   3                        year=FmReadByte(Serch_Room_TIME_ADDR+0xE004);
2306   3                        hour1=hour%10+0x30;//个位
2307   3                        hour2=hour/10+0x30;//十位
2308   3                        minute1=minute%10+0x30;//个位
2309   3                        minute2=minute/10+0x30;//十位
2310   3                        day1=day%10+0x30;//个位
2311   3                        day2=day/10+0x30;//十位
2312   3                        month1=month%10+0x30;//个位
2313   3                        month2=month/10+0x30;//十位
2314   3                        year1=year%10+0x30;//个位
2315   3                        year2=year/10+0x30;//十位
2316   3                    Get_GT23_Data(0x00,0x32,3);
2317   3                    lcd_fangda_dis_text(146,193+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
2318   3                    Get_GT23_Data(0x00,0x30,3);
2319   3                    lcd_fangda_dis_text(163,193+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
2320   3                        Get_GT23_Data(0x00,year2,3);
2321   3                        lcd_fangda_dis_text(180,193+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);       
2322   3                    Get_GT23_Data(0x00,year1,3);
2323   3                    lcd_fangda_dis_text(197,193+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
2324   3                    Get_GT23_Data(0x00,0x2F,3);
2325   3                    lcd_fangda_dis_text(214,191+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);// "/"
2326   3                    Get_GT23_Data(0x00,month2,3);
2327   3                    lcd_fangda_dis_text(231,193+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
2328   3                    Get_GT23_Data(0x00,month1,3);
2329   3                    lcd_fangda_dis_text(248,193+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
2330   3                    Get_GT23_Data(0x00,0x2F,3);
2331   3                    lcd_fangda_dis_text(265,191+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);// "/"
2332   3                        Get_GT23_Data(0x00,day2,3);
2333   3                    lcd_fangda_dis_text(282,193+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
2334   3                    Get_GT23_Data(0x00,day1,3);
2335   3                    lcd_fangda_dis_text(299,193+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
2336   3                    Get_GT23_Data(0x00,hour2,3);
2337   3                    lcd_fangda_dis_text(356,193+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
2338   3                    Get_GT23_Data(0x00,hour1,3);
2339   3                    lcd_fangda_dis_text(373,193+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
2340   3                    Get_GT23_Data(0x00,0x3A,3);
2341   3                    lcd_fangda_dis_text(395,188+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);//":"
2342   3                    Get_GT23_Data(0x00,minute2,3);
2343   3                    lcd_fangda_dis_text(407,193+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
2344   3                    Get_GT23_Data(0x00,minute1,3);
C51 COMPILER V9.00   LCDDRIVER                                                             06/23/2017 13:33:25 PAGE 39  

2345   3                    lcd_fangda_dis_text(424,193+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
2346   3                      }
2347   2                      if(serchroomcount>14)
2348   2                      {
2349   3                   //第五行护士编号
2350   3                    nursenumber=FmReadByte(Serch_Room_ADDR+0x2F000);
2351   3                    nursenumber=nursenumber&0x7F;
2352   3                    nursenumber=nursenumber%100;
2353   3                    nursenumber1=nursenumber%10+0x30;//个位
2354   3                    nursenumber2=nursenumber/10+0x30;//十位
2355   3                    Get_GT23_Data(0x00,nursenumber2,3);
2356   3                    lcd_fangda_dis_text(63,232+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);    
2357   3                    Get_GT23_Data(0x00,nursenumber1,3);
2358   3                    lcd_fangda_dis_text(83,232+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
2359   3                    //第五行查房时间
2360   3                    minute=FmReadByte(Serch_Room_TIME_ADDR+0xF000);
2361   3                        hour=FmReadByte(Serch_Room_TIME_ADDR+0xF001);
2362   3                        day=FmReadByte(Serch_Room_TIME_ADDR+0xF002);
2363   3                        month=FmReadByte(Serch_Room_TIME_ADDR+0xF003);
2364   3                        year=FmReadByte(Serch_Room_TIME_ADDR+0xF004);
2365   3                        hour1=hour%10+0x30;//个位
2366   3                        hour2=hour/10+0x30;//十位
2367   3                        minute1=minute%10+0x30;//个位
2368   3                        minute2=minute/10+0x30;//十位
2369   3                        day1=day%10+0x30;//个位
2370   3                        day2=day/10+0x30;//十位
2371   3                        month1=month%10+0x30;//个位
2372   3                        month2=month/10+0x30;//十位
2373   3                        year1=year%10+0x30;//个位
2374   3                        year2=year/10+0x30;//十位
2375   3                    Get_GT23_Data(0x00,0x32,3);
2376   3                    lcd_fangda_dis_text(146,232+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
2377   3                    Get_GT23_Data(0x00,0x30,3);
2378   3                    lcd_fangda_dis_text(163,232+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
2379   3                    Get_GT23_Data(0x00,year2,3);
2380   3                    lcd_fangda_dis_text(180,232+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
2381   3                    Get_GT23_Data(0x00,year1,3);
2382   3                    lcd_fangda_dis_text(197,232+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
2383   3                    Get_GT23_Data(0x00,0x2F,3);
2384   3                    lcd_fangda_dis_text(214,230+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);// "/"
2385   3                    Get_GT23_Data(0x00,month2,3);
2386   3                    lcd_fangda_dis_text(231,232+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
2387   3                    Get_GT23_Data(0x00,month1,3);
2388   3                    lcd_fangda_dis_text(248,232+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
2389   3                    Get_GT23_Data(0x00,0x2F,3);
2390   3                    lcd_fangda_dis_text(265,230+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);// "/"
2391   3                    Get_GT23_Data(0x00,day2,3);
2392   3                    lcd_fangda_dis_text(282,232+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
2393   3                    Get_GT23_Data(0x00,day1,3);
2394   3                    lcd_fangda_dis_text(299,232+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
2395   3                    Get_GT23_Data(0x00,hour2,3);
2396   3                    lcd_fangda_dis_text(356,232+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
2397   3                    Get_GT23_Data(0x00,hour1,3);
2398   3                    lcd_fangda_dis_text(373,232+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
2399   3                    Get_GT23_Data(0x00,0x3A,3);
2400   3                    lcd_fangda_dis_text(395,228+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);//":"
2401   3                    Get_GT23_Data(0x00,minute2,3);
2402   3                    lcd_fangda_dis_text(407,232+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
2403   3                    Get_GT23_Data(0x00,minute1,3);
2404   3                    lcd_fangda_dis_text(424,232+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
2405   3                      }
2406   2              }
C51 COMPILER V9.00   LCDDRIVER                                                             06/23/2017 13:33:25 PAGE 40  

2407   1        else
2408   1        {              //显示第一行护士号及查房时间
2409   2                   nursenumber=FmReadByte(Serch_Room_ADDR+0xB000);
2410   2                       nursenumber=nursenumber&0x7F;
2411   2                       nursenumber=nursenumber%100;
2412   2                       nursenumber1=nursenumber%10+0x30;//个位
2413   2                       nursenumber2=nursenumber/10+0x30;//十位
2414   2                   //第一行护士编号
2415   2                   Get_GT23_Data(0x00,nursenumber2,3);
2416   2                   lcd_fangda_dis_text(63,73+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);      
2417   2                   Get_GT23_Data(0x00,nursenumber1,3);
2418   2                   lcd_fangda_dis_text(83,73+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
2419   2               //第一行查房时间
2420   2                       minute=FmReadByte(Serch_Room_TIME_ADDR+0xB000);
2421   2                       hour=FmReadByte(Serch_Room_TIME_ADDR+0xB001);
2422   2                       day=FmReadByte(Serch_Room_TIME_ADDR+0xB002);
2423   2                       month=FmReadByte(Serch_Room_TIME_ADDR+0xB003);
2424   2                       year=FmReadByte(Serch_Room_TIME_ADDR+0xB004);
2425   2                       hour1=hour%10+0x30;//个位
2426   2                       hour2=hour/10+0x30;//十位
2427   2                       minute1=minute%10+0x30;//个位
2428   2                       minute2=minute/10+0x30;//十位
2429   2                       day1=day%10+0x30;//个位
2430   2                       day2=day/10+0x30;//十位
2431   2                       month1=month%10+0x30;//个位
2432   2                       month2=month/10+0x30;//十位
2433   2                       year1=year%10+0x30;//个位
2434   2                       year2=year/10+0x30;//十位
2435   2                       //----------------------------------------------------------------------
2436   2                       //----------------------------------------------------------------------
2437   2                       Get_GT23_Data(0x00,0x32,3);
2438   2                   lcd_fangda_dis_text(146,73+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);     
2439   2                   Get_GT23_Data(0x00,0x30,3);
2440   2                   lcd_fangda_dis_text(163,73+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
2441   2                       Get_GT23_Data(0x00,year2,3);
2442   2                       lcd_fangda_dis_text(180,73+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data); 
2443   2                   Get_GT23_Data(0x00,year1,3);
2444   2                   lcd_fangda_dis_text(197,73+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
2445   2                   Get_GT23_Data(0x00,0x2F,3);
2446   2                   lcd_fangda_dis_text(214,71+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);// "/"
2447   2                   Get_GT23_Data(0x00,month2,3);
2448   2                   lcd_fangda_dis_text(231,73+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);     
2449   2                   Get_GT23_Data(0x00,month1,3);
2450   2                   lcd_fangda_dis_text(248,73+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);     
2451   2                   Get_GT23_Data(0x00,0x2F,3);
2452   2                   lcd_fangda_dis_text(265,71+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);// "/"
2453   2                       Get_GT23_Data(0x00,day2,3);
2454   2                   lcd_fangda_dis_text(282,73+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);     
2455   2                   Get_GT23_Data(0x00,day1,3);
2456   2                   lcd_fangda_dis_text(299,73+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);     
2457   2                   Get_GT23_Data(0x00,hour2,3);
2458   2                   lcd_fangda_dis_text(356,73+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);     
2459   2                   Get_GT23_Data(0x00,hour1,3);
2460   2                   lcd_fangda_dis_text(373,73+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
2461   2                   Get_GT23_Data(0x00,0x3A,3);
2462   2                   lcd_fangda_dis_text(395,68+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);//":"
2463   2                   Get_GT23_Data(0x00,minute2,3);
2464   2                   lcd_fangda_dis_text(407,73+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);     
2465   2                   Get_GT23_Data(0x00,minute1,3);
2466   2                   lcd_fangda_dis_text(424,73+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);     
2467   2                       //---------------------------------------------------------------------
2468   2                  //第二行护士编号
C51 COMPILER V9.00   LCDDRIVER                                                             06/23/2017 13:33:25 PAGE 41  

2469   2                   nursenumber=FmReadByte(Serch_Room_ADDR+0xC000);
2470   2                       nursenumber=nursenumber&0x7F;
2471   2                       nursenumber=nursenumber%100;
2472   2                       nursenumber1=nursenumber%10+0x30;//个位
2473   2                       nursenumber2=nursenumber/10+0x30;//十位
2474   2                   Get_GT23_Data(0x00,nursenumber2,3);
2475   2                   lcd_fangda_dis_text(63,113+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);     
2476   2                   Get_GT23_Data(0x00,nursenumber1,3);
2477   2                   lcd_fangda_dis_text(83,113+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
2478   2                  //第二行查房时间
2479   2                       minute=FmReadByte(Serch_Room_TIME_ADDR+0xC000);
2480   2                       hour=FmReadByte(Serch_Room_TIME_ADDR+0xC001);
2481   2                       day=FmReadByte(Serch_Room_TIME_ADDR+0xC002);
2482   2                       month=FmReadByte(Serch_Room_TIME_ADDR+0xC003);
2483   2                       year=FmReadByte(Serch_Room_TIME_ADDR+0xC004);
2484   2                       hour1=hour%10+0x30;//个位
2485   2                       hour2=hour/10+0x30;//十位
2486   2                       minute1=minute%10+0x30;//个位
2487   2                       minute2=minute/10+0x30;//十位
2488   2                       day1=day%10+0x30;//个位
2489   2                       day2=day/10+0x30;//十位
2490   2                       month1=month%10+0x30;//个位
2491   2                       month2=month/10+0x30;//十位
2492   2                       year1=year%10+0x30;//个位
2493   2                       year2=year/10+0x30;//十位
2494   2                      //------------------------------------------------------------------------
2495   2                      //------------------------------------------------------------------------
2496   2                   Get_GT23_Data(0x00,0x32,3);
2497   2                   lcd_fangda_dis_text(146,113+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);    
2498   2                   Get_GT23_Data(0x00,0x30,3);
2499   2                   lcd_fangda_dis_text(163,113+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
2500   2                       Get_GT23_Data(0x00,year2,3);
2501   2                       lcd_fangda_dis_text(180,113+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);        
2502   2                   Get_GT23_Data(0x00,year1,3);
2503   2                   lcd_fangda_dis_text(197,113+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
2504   2                   Get_GT23_Data(0x00,0x2F,3);
2505   2                   lcd_fangda_dis_text(214,111+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);// "/"
2506   2                   Get_GT23_Data(0x00,month2,3);
2507   2                   lcd_fangda_dis_text(231,113+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);    
2508   2                   Get_GT23_Data(0x00,month1,3);
2509   2                   lcd_fangda_dis_text(248,113+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);    
2510   2                   Get_GT23_Data(0x00,0x2F,3);
2511   2                   lcd_fangda_dis_text(265,111+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);// "/"
2512   2                       Get_GT23_Data(0x00,day2,3);
2513   2                   lcd_fangda_dis_text(282,113+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);    
2514   2                   Get_GT23_Data(0x00,day1,3);
2515   2                   lcd_fangda_dis_text(299,113+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);    
2516   2                   Get_GT23_Data(0x00,hour2,3);
2517   2                   lcd_fangda_dis_text(356,113+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);    
2518   2                   Get_GT23_Data(0x00,hour1,3);
2519   2                   lcd_fangda_dis_text(373,113+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
2520   2                   Get_GT23_Data(0x00,0x3A,3);
2521   2                   lcd_fangda_dis_text(395,108+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);//":"
2522   2                   Get_GT23_Data(0x00,minute2,3);
2523   2                   lcd_fangda_dis_text(407,113+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);    
2524   2                   Get_GT23_Data(0x00,minute1,3);
2525   2                   lcd_fangda_dis_text(424,113+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);    
2526   2                      //-------------------------------------------------------------------------
2527   2                      //-------------------------------------------------------------------------
2528   2              //第三行护士编号
2529   2                   nursenumber=FmReadByte(Serch_Room_ADDR+0x2D000);
2530   2                   nursenumber=nursenumber&0x7F;
C51 COMPILER V9.00   LCDDRIVER                                                             06/23/2017 13:33:25 PAGE 42  

2531   2                   nursenumber=nursenumber%100;
2532   2                   nursenumber1=nursenumber%10+0x30;//个位
2533   2                   nursenumber2=nursenumber/10+0x30;//十位
2534   2                   Get_GT23_Data(0x00,nursenumber2,3);
2535   2                   lcd_fangda_dis_text(63,153+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);     
2536   2                   Get_GT23_Data(0x00,nursenumber1,3);
2537   2                   lcd_fangda_dis_text(83,153+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
2538   2                 //第三行查房时间
2539   2                   minute=FmReadByte(Serch_Room_TIME_ADDR+0xD000);
2540   2                       hour=FmReadByte(Serch_Room_TIME_ADDR+0xD001);
2541   2                       day=FmReadByte(Serch_Room_TIME_ADDR+0xD002);
2542   2                       month=FmReadByte(Serch_Room_TIME_ADDR+0xD003);
2543   2                       year=FmReadByte(Serch_Room_TIME_ADDR+0xD004);
2544   2                       hour1=hour%10+0x30;//个位
2545   2                       hour2=hour/10+0x30;//十位
2546   2                       minute1=minute%10+0x30;//个位
2547   2                       minute2=minute/10+0x30;//十位
2548   2                       day1=day%10+0x30;//个位
2549   2                       day2=day/10+0x30;//十位
2550   2                       month1=month%10+0x30;//个位
2551   2                       month2=month/10+0x30;//十位
2552   2                       year1=year%10+0x30;//个位
2553   2                       year2=year/10+0x30;//十位
2554   2                   Get_GT23_Data(0x00,0x32,3);
2555   2                   lcd_fangda_dis_text(146,153+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);    
2556   2                   Get_GT23_Data(0x00,0x30,3);
2557   2                   lcd_fangda_dis_text(163,153+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
2558   2                       Get_GT23_Data(0x00,year2,3);
2559   2                       lcd_fangda_dis_text(180,153+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);        
2560   2                   Get_GT23_Data(0x00,year1,3);
2561   2                   lcd_fangda_dis_text(197,153+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
2562   2                   Get_GT23_Data(0x00,0x2F,3);
2563   2                   lcd_fangda_dis_text(214,151+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);// "/"
2564   2                   Get_GT23_Data(0x00,month2,3);
2565   2                   lcd_fangda_dis_text(231,153+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);    
2566   2                   Get_GT23_Data(0x00,month1,3);
2567   2                   lcd_fangda_dis_text(248,153+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);    
2568   2                   Get_GT23_Data(0x00,0x2F,3);
2569   2                   lcd_fangda_dis_text(265,151+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);// "/"
2570   2                       Get_GT23_Data(0x00,day2,3);
2571   2                   lcd_fangda_dis_text(282,153+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);    
2572   2                   Get_GT23_Data(0x00,day1,3);
2573   2                   lcd_fangda_dis_text(299,153+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);    
2574   2                   Get_GT23_Data(0x00,hour2,3);
2575   2                   lcd_fangda_dis_text(356,153+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);    
2576   2                   Get_GT23_Data(0x00,hour1,3);
2577   2                   lcd_fangda_dis_text(373,153+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
2578   2                   Get_GT23_Data(0x00,0x3A,3);
2579   2                   lcd_fangda_dis_text(395,148+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);//":"
2580   2                   Get_GT23_Data(0x00,minute2,3);
2581   2                   lcd_fangda_dis_text(407,153+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);    
2582   2                   Get_GT23_Data(0x00,minute1,3);
2583   2                   lcd_fangda_dis_text(424,153+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);    
2584   2                 //第四行护士编号
2585   2                       nursenumber=FmReadByte(Serch_Room_ADDR+0x2E000);
2586   2                   nursenumber=nursenumber&0x7F;
2587   2                   nursenumber=nursenumber%100;
2588   2                   nursenumber1=nursenumber%10+0x30;//个位
2589   2                   nursenumber2=nursenumber/10+0x30;//十位
2590   2                   Get_GT23_Data(0x00,nursenumber2,3);
2591   2                   lcd_fangda_dis_text(63,193+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);     
2592   2                   Get_GT23_Data(0x00,nursenumber1,3);
C51 COMPILER V9.00   LCDDRIVER                                                             06/23/2017 13:33:25 PAGE 43  

2593   2                   lcd_fangda_dis_text(83,193+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
2594   2                 //第四行查房时间
2595   2                    minute=FmReadByte(Serch_Room_TIME_ADDR+0xE000);
2596   2                        hour=FmReadByte(Serch_Room_TIME_ADDR+0xE001);
2597   2                        day=FmReadByte(Serch_Room_TIME_ADDR+0xE002);
2598   2                        month=FmReadByte(Serch_Room_TIME_ADDR+0xE003);
2599   2                        year=FmReadByte(Serch_Room_TIME_ADDR+0xE004);
2600   2                        hour1=hour%10+0x30;//个位
2601   2                        hour2=hour/10+0x30;//十位
2602   2                        minute1=minute%10+0x30;//个位
2603   2                        minute2=minute/10+0x30;//十位
2604   2                        day1=day%10+0x30;//个位
2605   2                        day2=day/10+0x30;//十位
2606   2                        month1=month%10+0x30;//个位
2607   2                        month2=month/10+0x30;//十位
2608   2                        year1=year%10+0x30;//个位
2609   2                        year2=year/10+0x30;//十位
2610   2                    Get_GT23_Data(0x00,0x32,3);
2611   2                    lcd_fangda_dis_text(146,193+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
2612   2                    Get_GT23_Data(0x00,0x30,3);
2613   2                    lcd_fangda_dis_text(163,193+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
2614   2                        Get_GT23_Data(0x00,year2,3);
2615   2                        lcd_fangda_dis_text(180,193+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);       
2616   2                    Get_GT23_Data(0x00,year1,3);
2617   2                    lcd_fangda_dis_text(197,193+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
2618   2                    Get_GT23_Data(0x00,0x2F,3);
2619   2                    lcd_fangda_dis_text(214,191+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);// "/"
2620   2                    Get_GT23_Data(0x00,month2,3);
2621   2                    lcd_fangda_dis_text(231,193+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
2622   2                    Get_GT23_Data(0x00,month1,3);
2623   2                    lcd_fangda_dis_text(248,193+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
2624   2                    Get_GT23_Data(0x00,0x2F,3);
2625   2                    lcd_fangda_dis_text(265,191+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);// "/"
2626   2                        Get_GT23_Data(0x00,day2,3);
2627   2                    lcd_fangda_dis_text(282,193+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
2628   2                    Get_GT23_Data(0x00,day1,3);
2629   2                    lcd_fangda_dis_text(299,193+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
2630   2                    Get_GT23_Data(0x00,hour2,3);
2631   2                    lcd_fangda_dis_text(356,193+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
2632   2                    Get_GT23_Data(0x00,hour1,3);
2633   2                    lcd_fangda_dis_text(373,193+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
2634   2                    Get_GT23_Data(0x00,0x3A,3);
2635   2                    lcd_fangda_dis_text(395,188+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);//":"
2636   2                    Get_GT23_Data(0x00,minute2,3);
2637   2                    lcd_fangda_dis_text(407,193+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
2638   2                    Get_GT23_Data(0x00,minute1,3);
2639   2                    lcd_fangda_dis_text(424,193+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
2640   2                   //第五行护士编号
2641   2                    nursenumber=FmReadByte(Serch_Room_ADDR+0x2F000);
2642   2                    nursenumber=nursenumber&0x7F;
2643   2                    nursenumber=nursenumber%100;
2644   2                    nursenumber1=nursenumber%10+0x30;//个位
2645   2                    nursenumber2=nursenumber/10+0x30;//十位
2646   2                    Get_GT23_Data(0x00,nursenumber2,3);
2647   2                    lcd_fangda_dis_text(63,232+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);    
2648   2                    Get_GT23_Data(0x00,nursenumber1,3);
2649   2                    lcd_fangda_dis_text(83,232+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
2650   2                    //第五行查房时间
2651   2                    minute=FmReadByte(Serch_Room_TIME_ADDR+0xF000);
2652   2                        hour=FmReadByte(Serch_Room_TIME_ADDR+0xF001);
2653   2                        day=FmReadByte(Serch_Room_TIME_ADDR+0xF002);
2654   2                        month=FmReadByte(Serch_Room_TIME_ADDR+0xF003);
C51 COMPILER V9.00   LCDDRIVER                                                             06/23/2017 13:33:25 PAGE 44  

2655   2                        year=FmReadByte(Serch_Room_TIME_ADDR+0xF004);
2656   2                        hour1=hour%10+0x30;//个位
2657   2                        hour2=hour/10+0x30;//十位
2658   2                        minute1=minute%10+0x30;//个位
2659   2                        minute2=minute/10+0x30;//十位
2660   2                        day1=day%10+0x30;//个位
2661   2                        day2=day/10+0x30;//十位
2662   2                        month1=month%10+0x30;//个位
2663   2                        month2=month/10+0x30;//十位
2664   2                        year1=year%10+0x30;//个位
2665   2                        year2=year/10+0x30;//十位
2666   2                    Get_GT23_Data(0x00,0x32,3);
2667   2                    lcd_fangda_dis_text(146,232+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
2668   2                    Get_GT23_Data(0x00,0x30,3);
2669   2                    lcd_fangda_dis_text(163,232+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
2670   2                    Get_GT23_Data(0x00,year2,3);
2671   2                    lcd_fangda_dis_text(180,232+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
2672   2                    Get_GT23_Data(0x00,year1,3);
2673   2                    lcd_fangda_dis_text(197,232+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
2674   2                    Get_GT23_Data(0x00,0x2F,3);
2675   2                    lcd_fangda_dis_text(214,230+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);// "/"
2676   2                    Get_GT23_Data(0x00,month2,3);
2677   2                    lcd_fangda_dis_text(231,232+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
2678   2                    Get_GT23_Data(0x00,month1,3);
2679   2                    lcd_fangda_dis_text(248,232+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
2680   2                    Get_GT23_Data(0x00,0x2F,3);
2681   2                    lcd_fangda_dis_text(265,230+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);// "/"
2682   2                    Get_GT23_Data(0x00,day2,3);
2683   2                    lcd_fangda_dis_text(282,232+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
2684   2                    Get_GT23_Data(0x00,day1,3);
2685   2                    lcd_fangda_dis_text(299,232+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
2686   2                    Get_GT23_Data(0x00,hour2,3);
2687   2                    lcd_fangda_dis_text(356,232+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
2688   2                    Get_GT23_Data(0x00,hour1,3);
2689   2                    lcd_fangda_dis_text(373,232+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
2690   2                    Get_GT23_Data(0x00,0x3A,3);
2691   2                    lcd_fangda_dis_text(395,228+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);//":"
2692   2                    Get_GT23_Data(0x00,minute2,3);
2693   2                    lcd_fangda_dis_text(407,232+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
2694   2                    Get_GT23_Data(0x00,minute1,3);
2695   2                    lcd_fangda_dis_text(424,232+272,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);   
2696   2              }
2697   1        }
2698          void ShowNumberPage(void)
2699          {
2700   1         uint8 sec,sec1,sec2;
2701   1         uint8 room,room1,room2;
2702   1         uint16 xdata fcolor,bcolor;
2703   1         fcolor=WHITE;//字体颜色
2704   1         bcolor=BLUE; //字体背景色,也是清屏色
2705   1         sec=stLocalControl.stBusDealFreq.bySndSecAddr&0x7F;
2706   1         sec %=100;
2707   1         room=stLocalControl.stBusDealFreq.bySndRoomAddr&0x7F;
2708   1         room %=100;
2709   1         sec1=sec/10+0x30;
2710   1         sec2=sec%10+0x30;
2711   1         room1=room/10+0x30;
2712   1         room2=room%10+0x30;
2713   1         SetLcdState(1);
2714   1         Lcd_Fill(0,100+544,480,80,bcolor);
2715   1         Get_GT23_Data(0x00,sec1,3);
2716   1         lcd_fangda_dis_text(120,120+544,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
C51 COMPILER V9.00   LCDDRIVER                                                             06/23/2017 13:33:25 PAGE 45  

2717   1         Get_GT23_Data(0x00,sec2,3);
2718   1         lcd_fangda_dis_text(136,120+544,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
2719   1         Get_GT23_Data(0xC7,0xF8,3);
2720   1         lcd_fangda_dis_text(152,120+544,32,32,1,1,fcolor,bcolor,GT23_Rec_Data);//区
2721   1         Get_GT23_Data(0x00,room1,3);
2722   1         lcd_fangda_dis_text(184,120+544,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
2723   1         Get_GT23_Data(0x00,room2,3);
2724   1         lcd_fangda_dis_text(200,120+544,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
2725   1         Get_GT23_Data(0xB7,0xBF,3);
2726   1         lcd_fangda_dis_text(216,120+544,32,32,1,1,fcolor,bcolor,GT23_Rec_Data);//房
2727   1         Get_GT23_Data(0xB1,0xE0,3);
2728   1         lcd_fangda_dis_text(248,120+544,32,32,1,1,fcolor,bcolor,GT23_Rec_Data);//编
2729   1         Get_GT23_Data(0xBA,0xC5,3);
2730   1         lcd_fangda_dis_text(280,120+544,32,32,1,1,fcolor,bcolor,GT23_Rec_Data);//号
2731   1         Get_GT23_Data(0x00,0x2E,3);
2732   1         lcd_fangda_dis_text(312,110+544,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
2733   1         lcd_fangda_dis_text(328,110+544,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
2734   1         lcd_fangda_dis_text(344,110+544,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
2735   1         Set_VisualPage(2);
2736   1      }
2737          void ShowNumberPageOK(void)
2738          {
2739   1         uint16 xdata fcolor,bcolor;
2740   1         fcolor=WHITE;//字体颜色
2741   1         bcolor=BLUE; //字体背景色,也是清屏色
2742   1         Lcd_Fill(0,100+544,480,80,bcolor);
2743   1         Get_GT23_Data(0xB1,0xE0,3);
2744   1         lcd_fangda_dis_text(176,120+544,32,32,1,1,fcolor,bcolor,GT23_Rec_Data);//编
2745   1         Get_GT23_Data(0xBA,0xC5,3);
2746   1         lcd_fangda_dis_text(208,120+544,32,32,1,1,fcolor,bcolor,GT23_Rec_Data);//号
2747   1         Get_GT23_Data(0xB3,0xC9,3);
2748   1         lcd_fangda_dis_text(240,120+544,32,32,1,1,fcolor,bcolor,GT23_Rec_Data);//成
2749   1         Get_GT23_Data(0xB9,0xA6,3);
2750   1         lcd_fangda_dis_text(272,120+544,32,32,1,1,fcolor,bcolor,GT23_Rec_Data);//功
2751   1         Set_VisualPage(2);
2752   1      }
2753          void ShowCalling(void)
2754          {
2755   1         uint16 xdata fcolor,bcolor;
2756   1         fcolor=WHITE;//字体颜色
2757   1         bcolor=BLUE; //字体背景色,也是清屏色
2758   1         Lcd_Fill(0,644,480,80,bcolor);
2759   1         Get_GT23_Data(0xB1,0xBE,3);
2760   1         lcd_fangda_dis_text(128,120+544,32,32,1,1,fcolor,bcolor,GT23_Rec_Data);//本
2761   1         Get_GT23_Data(0xBB,0xFA,3);
2762   1         lcd_fangda_dis_text(160,120+544,32,32,1,1,fcolor,bcolor,GT23_Rec_Data);//机
2763   1         Get_GT23_Data(0xD5,0xFD,3);
2764   1         lcd_fangda_dis_text(192,120+544,32,32,1,1,fcolor,bcolor,GT23_Rec_Data);//正
2765   1         Get_GT23_Data(0xD4,0xDA,3);
2766   1         lcd_fangda_dis_text(224,120+544,32,32,1,1,fcolor,bcolor,GT23_Rec_Data);//在
2767   1         Get_GT23_Data(0xB9,0xE3,3);
2768   1         lcd_fangda_dis_text(256,120+544,32,32,1,1,fcolor,bcolor,GT23_Rec_Data);//广
2769   1         Get_GT23_Data(0xB2,0xA5,3);
2770   1         lcd_fangda_dis_text(288,120+544,32,32,1,1,fcolor,bcolor,GT23_Rec_Data);//播
2771   1         Get_GT23_Data(0xD6,0xD0,3);
2772   1         lcd_fangda_dis_text(320,120+544,32,32,1,1,fcolor,bcolor,GT23_Rec_Data);//中
2773   1         Set_VisualPage(2);
2774   1      }
2775          void ShowBROADCASTing(void)
2776          {
2777   1         uint8  xdata tempbed,temproom;
2778   1         uint8  xdata tempbedh,tempbedl;
C51 COMPILER V9.00   LCDDRIVER                                                             06/23/2017 13:33:25 PAGE 46  

2779   1         uint16 xdata fcolor,bcolor;
2780   1         fcolor=WHITE;//字体颜色
2781   1         bcolor=BLUE; //字体背景色,也是清屏色
2782   1         Lcd_Fill(0,100+544,480,80,bcolor);
2783   1         temproom=stLocalControl.stBusDealFreq.bySndRoomAddr;
2784   1         tempbed=stLocalControl.stBusDealFreq.bySndBedAddr;
2785   1         if(temproom==253&&tempbed!=0)    //医护分机正在广播
2786   1         {
2787   2           Broadcasting_Flag=1;
2788   2           tempbed=tempbed&0x7F;
2789   2               tempbed=tempbed%100;
2790   2               tempbedh=tempbed/10+0x30;
2791   2           tempbedl=tempbed%10+0x30;
2792   2               Get_GT23_Data(0x00,tempbedh,3);
2793   2           lcd_fangda_dis_text(80,122+544,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
2794   2           Get_GT23_Data(0x00,tempbedl,3);
2795   2           lcd_fangda_dis_text(96,122+544,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);  
2796   2           Get_GT23_Data(0xBA,0xC5,3);
2797   2           lcd_fangda_dis_text(112,120+544,32,32,1,1,fcolor,bcolor,GT23_Rec_Data);//号
2798   2           Get_GT23_Data(0xD2,0xBD,3);
2799   2           lcd_fangda_dis_text(144,120+544,32,32,1,1,fcolor,bcolor,GT23_Rec_Data);//医
2800   2           Get_GT23_Data(0xBB,0xA4,3);
2801   2           lcd_fangda_dis_text(176,120+544,32,32,1,1,fcolor,bcolor,GT23_Rec_Data);//护
2802   2           Get_GT23_Data(0xB7,0xD6,3);
2803   2           lcd_fangda_dis_text(208,120+544,32,32,1,1,fcolor,bcolor,GT23_Rec_Data);//分
2804   2           Get_GT23_Data(0xBB,0xFA,3);
2805   2           lcd_fangda_dis_text(240,120+544,32,32,1,1,fcolor,bcolor,GT23_Rec_Data);//机
2806   2           Get_GT23_Data(0xD5,0xFD,3);
2807   2           lcd_fangda_dis_text(272,120+544,32,32,1,1,fcolor,bcolor,GT23_Rec_Data);//正
2808   2           Get_GT23_Data(0xD4,0xDA,3);
2809   2           lcd_fangda_dis_text(304,120+544,32,32,1,1,fcolor,bcolor,GT23_Rec_Data);//在
2810   2           Get_GT23_Data(0xB9,0xE3,3);
2811   2           lcd_fangda_dis_text(336,120+544,32,32,1,1,fcolor,bcolor,GT23_Rec_Data);//广
2812   2           Get_GT23_Data(0xB2,0xA5,3);
2813   2           lcd_fangda_dis_text(368,120+544,32,32,1,1,fcolor,bcolor,GT23_Rec_Data);//播
2814   2           Set_VisualPage(2);
2815   2         }
2816   1        else if(temproom!=253&&tempbed==0)   //门口分机正在广播
2817   1        {
2818   2           Broadcasting_Flag=1;
2819   2           temproom=temproom&0x7F; 
2820   2               temproom=temproom%100;
2821   2           tempbedh=temproom/10+0x30;
2822   2           tempbedl=temproom%10+0x30;
2823   2               Get_GT23_Data(0x00,tempbedh,3);
2824   2           lcd_fangda_dis_text(80,122+544,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);
2825   2           Get_GT23_Data(0x00,tempbedl,3);
2826   2           lcd_fangda_dis_text(96,122+544,16,32,1,1,fcolor,bcolor,GT23_Rec_Data);  
2827   2           Get_GT23_Data(0xB7,0xBF,3);
2828   2           lcd_fangda_dis_text(112,120+544,32,32,1,1,fcolor,bcolor,GT23_Rec_Data);//房
2829   2           Get_GT23_Data(0xC3,0xC5,3);
2830   2           lcd_fangda_dis_text(144,120+544,32,32,1,1,fcolor,bcolor,GT23_Rec_Data);//门
2831   2           Get_GT23_Data(0xBF,0xDA,3);
2832   2           lcd_fangda_dis_text(176,120+544,32,32,1,1,fcolor,bcolor,GT23_Rec_Data);//口
2833   2           Get_GT23_Data(0xB7,0xD6,3);
2834   2           lcd_fangda_dis_text(208,120+544,32,32,1,1,fcolor,bcolor,GT23_Rec_Data);//分
2835   2           Get_GT23_Data(0xBB,0xFA,3);
2836   2           lcd_fangda_dis_text(240,120+544,32,32,1,1,fcolor,bcolor,GT23_Rec_Data);//机
2837   2           Get_GT23_Data(0xD5,0xFD,3);
2838   2           lcd_fangda_dis_text(272,120+544,32,32,1,1,fcolor,bcolor,GT23_Rec_Data);//正
2839   2           Get_GT23_Data(0xD4,0xDA,3);
2840   2           lcd_fangda_dis_text(304,120+544,32,32,1,1,fcolor,bcolor,GT23_Rec_Data);//在
C51 COMPILER V9.00   LCDDRIVER                                                             06/23/2017 13:33:25 PAGE 47  

2841   2           Get_GT23_Data(0xB9,0xE3,3);
2842   2           lcd_fangda_dis_text(336,120+544,32,32,1,1,fcolor,bcolor,GT23_Rec_Data);//广
2843   2           Get_GT23_Data(0xB2,0xA5,3);
2844   2           lcd_fangda_dis_text(368,120+544,32,32,1,1,fcolor,bcolor,GT23_Rec_Data);//播
2845   2           Set_VisualPage(2); 
2846   2        } 
2847   1      }
2848          //-------------------------------------------------------------------------------
2849          //-------------------------------------------------------------------------------
2850          
2851          
2852          
2853          void ShowBusError(void)
2854          {
2855   1              uint16 xdata  fcolor,bcolor;    
2856   1      
2857   1          if(Modify_SEC_Name==0x01)
2858   1          {
2859   2                      if(Page_Color[3]>=9 ||Page_Color[4]>=9)
2860   2                      {
2861   3                              fcolor=BLUE1;  //字体颜色 
2862   3                              bcolor=WHITE; //字体背景色,也是清屏色
2863   3                      }
2864   2                      else
2865   2                      {
2866   3                              fcolor = ColorIndex[Page_Color[3]]; //字体颜色 
2867   3                              bcolor = ColorIndex[Page_Color[4]]; //字体背景色,也是清屏色
2868   3                      }
2869   2          }
2870   1              else
2871   1              {
2872   2                fcolor=BLUE1;//字体颜色
2873   2                bcolor=WHITE; //字体背景色,也是清屏色
2874   2              }
2875   1      
2876   1              Get_GT23_Data1("总",1);                                                                           //如果有总线故障则显示“总线故障”
2877   1              lcd_fangda_dis_text(416,256,16,16,1,1,fcolor,bcolor,GT23_Rec_Data);
2878   1              Get_GT23_Data1("线",1);
2879   1              lcd_fangda_dis_text(432,256,16,16,1,1,fcolor,bcolor,GT23_Rec_Data);
2880   1              Get_GT23_Data1("故",1);
2881   1              lcd_fangda_dis_text(448,256,16,16,1,1,fcolor,bcolor,GT23_Rec_Data);//故
2882   1              Get_GT23_Data1("障",1);
2883   1              lcd_fangda_dis_text(464,256,16,16,1,1,fcolor,bcolor,GT23_Rec_Data);//障
2884   1      }
2885          
2886          
2887          
2888          
2889          void ShowSelfError(void)
2890          {
2891   1              uint16 xdata  fcolor,bcolor;    
2892   1       
2893   1              fcolor=BLUE1;//字体颜色
2894   1              bcolor=WHITE; //字体背景色,也是清屏色
2895   1      
2896   1              if(Modify_SEC_Name==0x01)
2897   1               {
2898   2                       if(Page_Color[3]>=9||Page_Color[4]>=9)
2899   2                       {
2900   3                               fcolor=BLUE1;  //字体颜色 
2901   3                               bcolor=WHITE; //字体背景色,也是清屏色
2902   3                       }
C51 COMPILER V9.00   LCDDRIVER                                                             06/23/2017 13:33:25 PAGE 48  

2903   2                       else
2904   2                       {
2905   3                               fcolor = ColorIndex[Page_Color[3]]; //字体颜色 
2906   3                               bcolor = ColorIndex[Page_Color[4]]; //字体背景色,也是清屏色
2907   3                       }
2908   2               }
2909   1               else
2910   1               {
2911   2                 fcolor=BLUE1;//字体颜色
2912   2                 bcolor=WHITE; //字体背景色,也是清屏色
2913   2               }
2914   1              
2915   1               Get_GT23_Data1("本",1);                                                                           //如果本机故障则显示“本机故障”
2916   1               lcd_fangda_dis_text(416,256,16,16,1,1,fcolor,bcolor,GT23_Rec_Data);
2917   1               Get_GT23_Data1("机",1);
2918   1               lcd_fangda_dis_text(432,256,16,16,1,1,fcolor,bcolor,GT23_Rec_Data);
2919   1               Get_GT23_Data1("故",1);
2920   1               lcd_fangda_dis_text(448,256,16,16,1,1,fcolor,bcolor,GT23_Rec_Data);//故
2921   1               Get_GT23_Data1("障",1);
2922   1               lcd_fangda_dis_text(464,256,16,16,1,1,fcolor,bcolor,GT23_Rec_Data);//障
2923   1      
2924   1      }
2925          
2926          
2927          
2928          void ShowNormal(void)
2929          {
2930   1               Lcd_Fill(416,256,64,16,ColorIndex[Page_Color[4]]);
2931   1      }
2932          //-------------------------------------------------------------------------------
2933          //-------------------------------------------------------------------------------
2934          /**********************************************************
2935          *函数名称                       :ShowPage       
2936          *函数描述               :显示整页数据
2937          *输入参数               :                                
2938          *返回值                         :       
2939          *全局变量                       :
2940          *调用模块                       :
2941          ***********************************************************
2942          *创建人                 :熊坚强
2943          *创建日期                       :2011-2-23
2944          ***********************************************************
2945          *修改人                         :
2946          *修改日期               :
2947          *注释                   :
2948          **********************************************************/ 
2949          void ShowPage(void)
2950          {       
2951   1              uint8  xdata byData1,byData2,byData3;   
2952   1              uint16 xdata fcolor,bcolor,ccolor;
2953   1              if(bIndication)
2954   1              {       
2955   2                return;         //有呼叫信息存在,退出
2956   2              }
2957   1          if(Modify_SEC_Name==0x01)
2958   1          {
2959   2            byData1=Page_Color[0];//字体颜色 
2960   2                byData2=Page_Color[1];//字体背景色,也是清屏色
2961   2                byData3=Page_Color[2];//中间填充色
2962   2      
2963   2                fcolor = ColorIndex[byData1];
2964   2                bcolor = ColorIndex[byData2];
C51 COMPILER V9.00   LCDDRIVER                                                             06/23/2017 13:33:25 PAGE 49  

2965   2                ccolor = ColorIndex[byData3];
2966   2          }
2967   1              else
2968   1              {
2969   2                fcolor=WHITE;//字体颜色
2970   2                bcolor=BLUE1; //字体背景色,也是清屏色
2971   2                ccolor=YELLOW;//房号与几床到几床的中间填充颜色
2972   2              }
2973   1              //科室号
2974   1              if(Modify_SEC_Name==0x01)
2975   1              {
2976   2                  ShowSecPage(); 
2977   2          }
2978   1              //-------------------------------------------------------------------
2979   1              //房号
2980   1              if(Modify_Room_Number==0x01) //如果已经编号，则显示房号
2981   1              {
2982   2                  byData1=stLocalControl.stEepromCfgData.bySelfRoomAddr&0x7F;
2983   2                  byData1=byData1%100;
2984   2                  byData2=stLocalControl.stEepromCfgData.bySelfSecAddr&0x7F;
2985   2                  byData2=byData2%100;
2986   2                      if(byData2/10>0)
2987   2                      {
2988   3                         Get_GT23_Data(0x00,byData2/10+0x30,3);
2989   3                     lcd_fangda_dis_text(142,96,16,32,2,2,fcolor,bcolor,GT23_Rec_Data);
2990   3                         Get_GT23_Data(0x00,byData2%10+0x30,3);
2991   3                     lcd_fangda_dis_text(174,96,16,32,2,2,fcolor,bcolor,GT23_Rec_Data);
2992   3                     Get_GT23_Data(0x00,byData1/10+0x30,3);
2993   3                     lcd_fangda_dis_text(206,96,16,32,2,2,fcolor,bcolor,GT23_Rec_Data);
2994   3                     Get_GT23_Data(0x00,byData1%10+0x30,3);
2995   3                     lcd_fangda_dis_text(238,96,16,32,2,2,fcolor,bcolor,GT23_Rec_Data); 
2996   3                     Get_GT23_Data(0xB7,0xBF,3);
2997   3                     lcd_fangda_dis_text(270,94,32,32,2,2,fcolor,bcolor,GT23_Rec_Data);
2998   3                 }
2999   2                 else
3000   2                 {
3001   3                     Get_GT23_Data(0x00,byData2%10+0x30,3);
3002   3                     lcd_fangda_dis_text(160,96,16,32,2,2,fcolor,bcolor,GT23_Rec_Data);
3003   3                     Get_GT23_Data(0x00,byData1/10+0x30,3);
3004   3                     lcd_fangda_dis_text(192,96,16,32,2,2,fcolor,bcolor,GT23_Rec_Data);
3005   3                     Get_GT23_Data(0x00,byData1%10+0x30,3);
3006   3                     lcd_fangda_dis_text(224,96,16,32,2,2,fcolor,bcolor,GT23_Rec_Data); 
3007   3                     Get_GT23_Data(0xB7,0xBF,3);
3008   3                     lcd_fangda_dis_text(256,94,32,32,2,2,fcolor,bcolor,GT23_Rec_Data);
3009   3                 }
3010   2              }
3011   1              //-------------------------------------------------------------------
3012   1              //几床到几床
3013   1              if(Modify_SEC_Name==0x01)
3014   1          {
3015   2             byData1=Page_Color[3];//字体颜色 
3016   2                 byData2=Page_Color[4];//字体背景色,也是清屏色
3017   2                 fcolor = ColorIndex[byData1];
3018   2                 bcolor = ColorIndex[byData2];
3019   2          }
3020   1              else
3021   1              {
3022   2                 fcolor=BLUE1;//字体颜色
3023   2                 bcolor=WHITE;//字体背景色,也是清屏色
3024   2              }
3025   1              if(Modify_SEC_Name==0x01)
3026   1              {
C51 COMPILER V9.00   LCDDRIVER                                                             06/23/2017 13:33:25 PAGE 50  

3027   2                 ShowBedPage();
3028   2              }
3029   1              Set_VisualPage(0);
3030   1      }
3031          void LcmInit(void)
3032          {
3033   1      
3034   1         //背光控制端(P3.5)设置为推挽输出
3035   1          P3M1 &= 0xDF;
3036   1          P3M0 |= 0x20;
3037   1          LCD_LED=0;
3038   1              SSD1963_RD=1;
3039   1          SSD1963_CS=0;
3040   1          SSD1963_RST=1;            
3041   1          //Delayms(5);
3042   1              
3043   1          SSD1963_RST=0;
3044   1          Delayms(10);
3045   1          SSD1963_RST=1;
3046   1          Delayms(5);
3047   1          Send_Ssd1963_Command(0x01); 
3048   1          Delayms(5);
3049   1          Send_Ssd1963_Command(0xE0);
3050   1          Delayms(1);
3051   1          Send_Ssd1963_Data(0x01);
3052   1          Delayms(1);
3053   1          Send_Ssd1963_Command(0xE0);
3054   1          Delayms(1);
3055   1          Send_Ssd1963_Data(0x03);
3056   1          Delayms(1);
3057   1          Send_Ssd1963_Command(0xE2); 
3058   1          Send_Ssd1963_Data(0x3B);
3059   1          Send_Ssd1963_Data(0x02);
3060   1          Send_Ssd1963_Data(0x04);
3061   1          Send_Ssd1963_Command(0xE6);
3062   1          Delayms(1);
3063   1          Send_Ssd1963_Data(0x01);
3064   1          Send_Ssd1963_Data(0x55);
3065   1          Send_Ssd1963_Data(0x54);
3066   1          Send_Ssd1963_Command(0xB0);
3067   1          Send_Ssd1963_Data(0x00);    
3068   1          Send_Ssd1963_Data(0x00);
3069   1          Send_Ssd1963_Data(0x01);
3070   1          Send_Ssd1963_Data(0xDF);
3071   1          Send_Ssd1963_Data(0x01);
3072   1          Send_Ssd1963_Data(0x0F);
3073   1          Send_Ssd1963_Data(0x00);
3074   1          Send_Ssd1963_Command(0x3A);
3075   1          Send_Ssd1963_Data(0x20);
3076   1          Send_Ssd1963_Command(0xB4);
3077   1          Send_Ssd1963_Data(0x02);
3078   1          Send_Ssd1963_Data(0x12);
3079   1          Send_Ssd1963_Data(0x00);
3080   1          Send_Ssd1963_Data(0x40);
3081   1          Send_Ssd1963_Data(0x07);
3082   1          Send_Ssd1963_Data(0x00);
3083   1          Send_Ssd1963_Data(0x00);
3084   1          Send_Ssd1963_Data(0x00);
3085   1          Send_Ssd1963_Command(0xB6);
3086   1          Send_Ssd1963_Data(0x01);
3087   1          Send_Ssd1963_Data(0x1F);
3088   1          Send_Ssd1963_Data(0x00);
C51 COMPILER V9.00   LCDDRIVER                                                             06/23/2017 13:33:25 PAGE 51  

3089   1          Send_Ssd1963_Data(0x04);
3090   1          Send_Ssd1963_Data(0x01);
3091   1          Send_Ssd1963_Data(0x00);
3092   1          Send_Ssd1963_Data(0x00);
3093   1          Send_Ssd1963_Command(0x2A);
3094   1              Send_Ssd1963_Data(0x00);
3095   1              Send_Ssd1963_Data(0x00);
3096   1              Send_Ssd1963_Data(0xDF);
3097   1              Send_Ssd1963_Data(0x01);
3098   1          Send_Ssd1963_Command(0x2B);
3099   1              Send_Ssd1963_Data(0x00);
3100   1              Send_Ssd1963_Data(0x00);
3101   1              Send_Ssd1963_Data(0x0F);
3102   1              Send_Ssd1963_Data(0x01);
3103   1              SetScrollArea(0,272,0);
3104   1          Send_Ssd1963_Command(0x36);
3105   1          Send_Ssd1963_Data(0x08);
3106   1          Send_Ssd1963_Command(0xF0);
3107   1              Send_Ssd1963_Data(0x03);
3108   1          Delayms(1);
3109   1          Send_Ssd1963_Command(0x29);
3110   1          Send_Ssd1963_Command(0xB8);
3111   1          Send_Ssd1963_Data(0x0F);
3112   1          Send_Ssd1963_Data(0x01);
3113   1          Send_Ssd1963_Command(0xBA);
3114   1          Send_Ssd1963_Data(0x01);
3115   1          //SSD1963_CS=1;
3116   1              Lcd_Clear(BLUE,0);
3117   1              bLcdOn =1;
3118   1              LCD_LED=1;
3119   1              ShowVersion(3,0,0);  //“软件版本号”、主界面放在第一屏
3120   1              Lcd_Clear(BLUE,1);        
3121   1              //ShowVersion(1,3,1);    //“护士查房”放在第二屏
3122   1              First_Serchroom_Flag=1;
3123   1              Lcd_Clear(BLUE,2);
3124   1              //ShowLandingFace();   //“系统初始化”、呼叫信息放在第三屏
3125   1              SetLedDealState(LED_OFF);
3126   1              SetMDLedState(LED_OFF);
3127   1              SetLcdState(1);
3128   1              ReadPageColour();       
3129   1              ShowPage();             
3130   1      } 


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =  46548    ----
   CONSTANT SIZE    =    108    ----
   XDATA SIZE       =      2     191
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----      78
   IDATA SIZE       =   ----    ----
   BIT SIZE         =      2    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
